{"ast":null,"code":"import _defineProperty from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";// import { Formik } from \"formik\";\nimport httpClient from\"../../util/httpClient\";import notify from\"../../util/notify\";import{Link}from\"react-router-dom\";import SubmitButton from\"../../common/submitButton/submitButton.component\";export var ForgotPassword=/*#__PURE__*/function(_Component){_inherits(ForgotPassword,_Component);var _super=_createSuper(ForgotPassword);function ForgotPassword(){var _this;_classCallCheck(this,ForgotPassword);_this=_super.call(this);_this.handleChanges=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(function(preState){return{data:_objectSpread(_objectSpread({},preState.data),{},_defineProperty({},name,value))};},function(){// console.log(\"callback part of setstate >>\", this.state);\n//form validation\n_this.validateForm(name);});};_this.handleSubmit=function(e){e.preventDefault();_this.setState({isSubmitting:true});httpClient.POST(\"/auth/forgot_password\",_this.state.data).then(function(data){notify.showInfo(\"Password reset link sent to your email, please check your inbox\");_this.props.history.push(\"/\");}).catch(function(err){notify.handleError(err);_this.setState({isSubmitting:false});});};_this.state={data:{email:\"\"},error:{email:\"\"},isSubmitting:false,isValidForm:false};return _this;}_createClass(ForgotPassword,[{key:\"validateForm\",value:function validateForm(fieldName){var _this2=this;var errMsg;switch(fieldName){case\"email\":errMsg=this.state.data[fieldName]?this.state.data[fieldName].includes(\"@\")&&this.state.data[fieldName].includes(\".com\")?\"\":\"Invalid Email\":\"Required Field\";break;default:break;}this.setState(function(preState){return{error:_objectSpread(_objectSpread({},preState.error),{},_defineProperty({},fieldName,errMsg))};},function(){//now disable submit button when form is invalid\nvar error=_this2.state.error;var err=Object.values(error).filter(function(item){return item;});_this2.setState({isValidForm:err.length===0});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"public_route page-div\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Forgot Password\"),/*#__PURE__*/React.createElement(\"p\",null,\"Please provide your email address to reset your password\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-group form-main\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Email Address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",className:\"form-control\",onChange:this.handleChanges}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.email),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(SubmitButton,{isSubmitting:this.props.isSubmitting,isValidForm:this.state.isValidForm})),/*#__PURE__*/React.createElement(\"div\",{className:\"pull_right\"},\"Back to\",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\" Login\")));}}]);return ForgotPassword;}(Component);","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/auth/forgotPassword/forgotPassword.component.js"],"names":["React","Component","httpClient","notify","Link","SubmitButton","ForgotPassword","handleChanges","event","target","name","value","setState","preState","data","validateForm","handleSubmit","e","preventDefault","isSubmitting","POST","state","then","showInfo","props","history","push","catch","err","handleError","email","error","isValidForm","fieldName","errMsg","includes","Object","values","filter","item","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import { Formik } from \"formik\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport { Link } from \"react-router-dom\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\n\nexport class ForgotPassword extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        email: \"\",\n      },\n      error: {\n        email: \"\",\n      },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n\n  handleChanges = (event) => {\n    const { name, value } = event.target;\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        // console.log(\"callback part of setstate >>\", this.state);\n        //form validation\n        this.validateForm(name);\n      }\n    );\n  };\n\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"email\":\n        errMsg = this.state.data[fieldName]\n          ? this.state.data[fieldName].includes(\"@\") &&\n            this.state.data[fieldName].includes(\".com\")\n            ? \"\"\n            : \"Invalid Email\"\n          : \"Required Field\";\n        break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        //now disable submit button when form is invalid\n\n        const { error } = this.state;\n        let err = Object.values(error).filter((item) => item);\n\n        this.setState({\n          isValidForm: err.length === 0,\n        });\n      }\n    );\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.setState({\n      isSubmitting: true,\n    });\n    httpClient\n      .POST(\"/auth/forgot_password\", this.state.data)\n      .then((data) => {\n        notify.showInfo(\n          \"Password reset link sent to your email, please check your inbox\"\n        );\n        this.props.history.push(\"/\");\n      })\n      .catch((err) => {\n        notify.handleError(err);\n        this.setState({\n          isSubmitting: false,\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"public_route page-div\">\n        <h2>Forgot Password</h2>\n        <p>Please provide your email address to reset your password</p>\n        <form className=\"form-group form-main\" onSubmit={this.handleSubmit}>\n          <br/>\n          <label>Email Address</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            className=\"form-control\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.email}</p>\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n        <div className=\"pull_right\">\n          Back to<Link to=\"/\"> Login</Link>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}