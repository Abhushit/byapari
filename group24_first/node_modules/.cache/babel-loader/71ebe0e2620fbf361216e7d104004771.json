{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/react_1/group24_first/src/components/products/productForm/productForm.component.js\";\nimport React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\"; // import Dropzone from \"react-dropzone\";\n\nconst imgURL = process.env.REACT_APP_IMG_URL;\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  description: \"\",\n  featuredProduct: '',\n  brand: \"\",\n  color: \"\",\n  price: \"\",\n  weight: \"\",\n  discountedItem: \"\",\n  discountType: \"\",\n  discountValue: \"\",\n  tags: \"\",\n  images: \"\",\n  manuDate: \"\",\n  expiryDate: \"\",\n  modelNo: \"\",\n  quantity: '',\n  inCart: ''\n};\nexport class ProductForm extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      let {\n        type,\n        name,\n        value,\n        checked,\n        files\n      } = e.target; // console.log(\"target files\", e.target);\n\n      if (type === \"checkbox\") {\n        value = checked;\n      }\n\n      if (type === \"file\") {\n        const {\n          filesToUpload\n        } = this.state; // filesToUpload.map(ftu => (\n        //   ftu.push(files),\n        //   this.setState({\n        //     ftu,\n        //   })\n        // ))\n\n        filesToUpload.push(...files);\n        return this.setState({\n          filesToUpload\n        }); // return this.setState({\n        //   filesToUpload: [...this.state.filesToUpload, ...files]\n        //   })\n      }\n\n      this.setState(preState => ({\n        data: { ...preState.data,\n          [name]: value\n        }\n      }), () => {\n        this.validateForm(name);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.submitCallback(this.state.data, this.state.filesToUpload);\n    };\n\n    this.state = {\n      data: { ...defaultForm\n      },\n      error: { ...defaultForm\n      },\n      isValidForm: false,\n      filesToUpload: []\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.product) {\n      this.setState({\n        data: { ...defaultForm,\n          ...this.props.product,\n          discountedItem: this.props.product.discount ? this.props.product.discount.discountedItem || false : \"\",\n          discountType: this.props.product.discount ? this.props.product.discount.discountType : \"\",\n          discountValue: this.props.product.discount ? this.props.product.discount.discountValue : \"\",\n          tags: this.props.product.tags ? this.props.product.tags.join(\",\") : \"\"\n        }\n      });\n    } // console.log(this.state);\n\n\n    console.log(\"files to upload>>\", this.state.filesToUpload);\n  }\n\n  componentDidUpdate(prevProps, prevState) {// console.log(\"called when either state chage or props change\");\n  }\n\n  validateForm(fieldName) {\n    let errMsg;\n\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(preState => ({\n      error: { ...preState.error,\n        [fieldName]: errMsg\n      }\n    }), () => {\n      let errors = Object.values(this.state.error).filter(err => err);\n      this.setState({\n        isValidForm: errors.length === 0\n      });\n    });\n  }\n\n  render() {\n    // let btn = this.props.isSubmitting ? (\n    //   <button disabled className=\"btn btn-info\">\n    //     submitting...\n    //   </button>\n    // ) : (\n    //   <button\n    //     disabled={!this.state.isValidForm}\n    //     type=\"submit\"\n    //     className=\"btn btn-info\"\n    //   >\n    //     submit\n    //   </button>\n    // );\n    let discountContent = this.state.data.discountedItem ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, \"Discount Type\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Discount Type\",\n      name: \"discountType\",\n      value: this.state.data.discountType,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, \"Discount Value\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Discount Value\",\n      name: \"discountValue\",\n      value: this.state.data.discountValue,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    })) : \"\";\n    let previousImage = this.state.data._id ? /*#__PURE__*/React.createElement(React.Fragment, null, \" \", /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, \"Previous Image\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }), this.state.data.images.map((image, i) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prev-images\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `${imgURL}/${image}`,\n      alt: \"Previous emage\",\n      width: \"300px\",\n      height: \"300px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    })))) : \"\";\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, this.props.title), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-group\",\n      onSubmit: this.handleSubmit,\n      encType: \"multipart/form-data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Name\",\n      name: \"name\",\n      value: this.state.data.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"featuredProduct\",\n      value: this.state.data.featuredProduct,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, \"Featured Product\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Description\",\n      name: \"description\",\n      value: this.state.data.description,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Category\",\n      name: \"category\",\n      value: this.state.data.category,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }\n    }, this.state.error.category), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }\n    }, \"Brand\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Brand\",\n      name: \"brand\",\n      value: this.state.data.brand,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Price\",\n      name: \"price\",\n      value: this.state.data.price,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }, \"Color\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Color\",\n      name: \"color\",\n      value: this.state.data.color,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }\n    }, \"Model No\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Model No\",\n      name: \"modelNo\",\n      value: this.state.data.modelNo,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }\n    }, \"Manu. Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"manuDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }\n    }, \"Expiry Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"expiryDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }\n    }, \"Tags\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Tags\",\n      name: \"tags\",\n      value: this.state.data.tags,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }\n    }, \"Weight\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Weight\",\n      name: \"weight\",\n      value: this.state.data.weight,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"discountedItem\",\n      checked: this.state.data.discountedItem,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }\n    }, \"Discounted Item\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }\n    }), discountContent, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }\n    }), previousImage, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      onChange: this.handleChange,\n      multiple: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SubmitButton, {\n      isSubmitting: this.props.isSubmitting,\n      isValidForm: this.state.isValidForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/products/productForm/productForm.component.js"],"names":["React","Component","SubmitButton","imgURL","process","env","REACT_APP_IMG_URL","defaultForm","name","category","description","featuredProduct","brand","color","price","weight","discountedItem","discountType","discountValue","tags","images","manuDate","expiryDate","modelNo","quantity","inCart","ProductForm","constructor","handleChange","e","type","value","checked","files","target","filesToUpload","state","push","setState","preState","data","validateForm","handleSubmit","preventDefault","props","submitCallback","error","isValidForm","componentDidMount","product","discount","join","console","log","componentDidUpdate","prevProps","prevState","fieldName","errMsg","errors","Object","values","filter","err","length","render","discountContent","previousImage","_id","map","image","i","title","isSubmitting"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,kDAAzB,C,CACA;;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA3B;AAEA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE,EADY;AAElBC,EAAAA,QAAQ,EAAE,EAFQ;AAGlBC,EAAAA,WAAW,EAAE,EAHK;AAIlBC,EAAAA,eAAe,EAAE,EAJC;AAKlBC,EAAAA,KAAK,EAAE,EALW;AAMlBC,EAAAA,KAAK,EAAE,EANW;AAOlBC,EAAAA,KAAK,EAAE,EAPW;AAQlBC,EAAAA,MAAM,EAAE,EARU;AASlBC,EAAAA,cAAc,EAAE,EATE;AAUlBC,EAAAA,YAAY,EAAE,EAVI;AAWlBC,EAAAA,aAAa,EAAE,EAXG;AAYlBC,EAAAA,IAAI,EAAE,EAZY;AAalBC,EAAAA,MAAM,EAAE,EAbU;AAclBC,EAAAA,QAAQ,EAAE,EAdQ;AAelBC,EAAAA,UAAU,EAAE,EAfM;AAgBlBC,EAAAA,OAAO,EAAE,EAhBS;AAiBlBC,EAAAA,QAAQ,EAAE,EAjBQ;AAkBlBC,EAAAA,MAAM,EAAE;AAlBU,CAApB;AAqBA,OAAO,MAAMC,WAAN,SAA0BzB,SAA1B,CAAoC;AACzC0B,EAAAA,WAAW,GAAG;AACZ;;AADY,SA4CdC,YA5Cc,GA4CEC,CAAD,IAAO;AACpB,UAAI;AAAEC,QAAAA,IAAF;AAAQtB,QAAAA,IAAR;AAAcuB,QAAAA,KAAd;AAAqBC,QAAAA,OAArB;AAA8BC,QAAAA;AAA9B,UAAwCJ,CAAC,CAACK,MAA9C,CADoB,CAEpB;;AACA,UAAIJ,IAAI,KAAK,UAAb,EAAyB;AACvBC,QAAAA,KAAK,GAAGC,OAAR;AACD;;AAED,UAAIF,IAAI,KAAK,MAAb,EAAqB;AACnB,cAAM;AAAEK,UAAAA;AAAF,YAAoB,KAAKC,KAA/B,CADmB,CAEnB;AACA;AACA;AACA;AACA;AACA;;AAEED,QAAAA,aAAa,CAACE,IAAd,CAAmB,GAAGJ,KAAtB;AACA,eAAO,KAAKK,QAAL,CAAc;AACnBH,UAAAA;AADmB,SAAd,CAAP,CAViB,CAcnB;AACA;AACA;AAED;;AAED,WAAKG,QAAL,CACGC,QAAD,KAAe;AACbC,QAAAA,IAAI,EAAE,EACJ,GAAGD,QAAQ,CAACC,IADR;AAEJ,WAAChC,IAAD,GAAQuB;AAFJ;AADO,OAAf,CADF,EAOE,MAAM;AACJ,aAAKU,YAAL,CAAkBjC,IAAlB;AACD,OATH;AAWD,KAlFa;;AAAA,SA6GdkC,YA7Gc,GA6GEb,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACc,cAAF;AACA,WAAKC,KAAL,CAAWC,cAAX,CAA0B,KAAKT,KAAL,CAAWI,IAArC,EAA2C,KAAKJ,KAAL,CAAWD,aAAtD;AACD,KAhHa;;AAEZ,SAAKC,KAAL,GAAa;AACXI,MAAAA,IAAI,EAAE,EACJ,GAAGjC;AADC,OADK;AAIXuC,MAAAA,KAAK,EAAE,EACL,GAAGvC;AADE,OAJI;AAOXwC,MAAAA,WAAW,EAAE,KAPF;AAQXZ,MAAAA,aAAa,EAAE;AARJ,KAAb;AAUD;;AAEDa,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKJ,KAAL,CAAWK,OAAf,EAAwB;AACtB,WAAKX,QAAL,CAAc;AACZE,QAAAA,IAAI,EAAE,EACJ,GAAGjC,WADC;AAEJ,aAAG,KAAKqC,KAAL,CAAWK,OAFV;AAGJjC,UAAAA,cAAc,EAAE,KAAK4B,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,GACZ,KAAKN,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,CAA4BlC,cAA5B,IAA8C,KADlC,GAEZ,EALA;AAMJC,UAAAA,YAAY,EAAE,KAAK2B,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,GACV,KAAKN,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,CAA4BjC,YADlB,GAEV,EARA;AASJC,UAAAA,aAAa,EAAE,KAAK0B,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,GACX,KAAKN,KAAL,CAAWK,OAAX,CAAmBC,QAAnB,CAA4BhC,aADjB,GAEX,EAXA;AAYJC,UAAAA,IAAI,EAAE,KAAKyB,KAAL,CAAWK,OAAX,CAAmB9B,IAAnB,GACF,KAAKyB,KAAL,CAAWK,OAAX,CAAmB9B,IAAnB,CAAwBgC,IAAxB,CAA6B,GAA7B,CADE,GAEF;AAdA;AADM,OAAd;AAkBD,KApBiB,CAqBlB;;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC,KAAKjB,KAAL,CAAWD,aAA5C;AAED;;AAEDmB,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB,CACvC;AACD;;AA0CDf,EAAAA,YAAY,CAACgB,SAAD,EAAY;AACtB,QAAIC,MAAJ;;AACA,YAAQD,SAAR;AACE,WAAK,UAAL;AACEC,QAAAA,MAAM,GAAG,KAAKtB,KAAL,CAAWI,IAAX,CAAgBiB,SAAhB,IAA6B,EAA7B,GAAkC,iBAA3C;AACA;;AAEF;AACE;AANJ;;AAQA,SAAKnB,QAAL,CACGC,QAAD,KAAe;AACbO,MAAAA,KAAK,EAAE,EACL,GAAGP,QAAQ,CAACO,KADP;AAEL,SAACW,SAAD,GAAaC;AAFR;AADM,KAAf,CADF,EAOE,MAAM;AACJ,UAAIC,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAKzB,KAAL,CAAWU,KAAzB,EAAgCgB,MAAhC,CAAwCC,GAAD,IAASA,GAAhD,CAAb;AACA,WAAKzB,QAAL,CAAc;AACZS,QAAAA,WAAW,EAAEY,MAAM,CAACK,MAAP,KAAkB;AADnB,OAAd;AAGD,KAZH;AAcD;;AAMDC,EAAAA,MAAM,GAAG;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAIC,eAAe,GAAG,KAAK9B,KAAL,CAAWI,IAAX,CAAgBxB,cAAhB,gBACpB,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,eAHd;AAIE,MAAA,IAAI,EAAC,cAJP;AAKE,MAAA,KAAK,EAAE,KAAKoB,KAAL,CAAWI,IAAX,CAAgBvB,YALzB;AAME,MAAA,QAAQ,EAAE,KAAKW,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,eAWE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,gBAHd;AAIE,MAAA,IAAI,EAAC,eAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgBtB,aALzB;AAME,MAAA,QAAQ,EAAE,KAAKU,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,CADoB,GAsBpB,EAtBF;AAyBA,QAAIuC,aAAa,GAAG,KAAK/B,KAAL,CAAWI,IAAX,CAAgB4B,GAAhB,gBAClB,0CACG,GADH,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAMG,KAAKhC,KAAL,CAAWI,IAAX,CAAgBpB,MAAhB,CAAuBiD,GAAvB,CAA2B,CAACC,KAAD,EAAOC,CAAP,kBAC1B;AAAK,MAAA,SAAS,EAAC,aAAf;AAA6B,MAAA,GAAG,EAAEA,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AACA,MAAA,GAAG,EAAG,GAAEpE,MAAO,IAAGmE,KAAM,EADxB;AAEA,MAAA,GAAG,EAAC,gBAFJ;AAGA,MAAA,KAAK,EAAC,OAHN;AAIA,MAAA,MAAM,EAAC,OAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADD,CANH,CADkB,GAqBlB,EArBF;AAwBA,wBACE,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAK1B,KAAL,CAAW4B,KAAhB,CADF,eAEE;AACE,MAAA,SAAS,EAAC,YADZ;AAEE,MAAA,QAAQ,EAAE,KAAK9B,YAFjB;AAGE,MAAA,OAAO,EAAC,qBAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,eAME;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,MAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWI,IAAX,CAAgBhC,IALzB;AAME,MAAA,QAAQ,EAAE,KAAKoB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,eAeE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,iBAFP;AAGE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgB7B,eAHzB;AAIE,MAAA,QAAQ,EAAE,KAAKiB,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,eAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BArBF,eAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBF,eAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAvBF,eAwBE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,aAHd;AAIE,MAAA,IAAI,EAAC,aAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgB9B,WALzB;AAME,MAAA,QAAQ,EAAE,KAAKkB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxBF,eAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhCF,eAiCE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,IAAI,EAAC,UAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgB/B,QALzB;AAME,MAAA,QAAQ,EAAE,KAAKmB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjCF,eAyCE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKQ,KAAL,CAAWU,KAAX,CAAiBrC,QAAvC,CAzCF,eA0CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eA1CF,eA2CE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,KAAK,EAAE,KAAK2B,KAAL,CAAWI,IAAX,CAAgB5B,KALzB;AAME,MAAA,QAAQ,EAAE,KAAKgB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CF,eAmDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAnDF,eAoDE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgB1B,KALzB;AAME,MAAA,QAAQ,EAAE,KAAKc,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApDF,eA4DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eA5DF,eA6DE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgB3B,KALzB;AAME,MAAA,QAAQ,EAAE,KAAKe,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7DF,eAqEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBArEF,eAsEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,IAAI,EAAC,SAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgBjB,OALzB;AAME,MAAA,QAAQ,EAAE,KAAKK,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtEF,eA8EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9EF,eA+EE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,QAAQ,EAAE,KAAKA,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/EF,eAqFE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBArFF,eAsFE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,IAAI,EAAC,YAHP;AAIE,MAAA,QAAQ,EAAE,KAAKA,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtFF,eA4FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA5FF,eA6FE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,MAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgBrB,IALzB;AAME,MAAA,QAAQ,EAAE,KAAKS,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7FF,eAqGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBArGF,eAsGE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,QAHd;AAIE,MAAA,IAAI,EAAC,QAJP;AAKE,MAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgBzB,MALzB;AAME,MAAA,QAAQ,EAAE,KAAKa,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtGF,eA8GE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,gBAFP;AAGE,MAAA,OAAO,EAAE,KAAKQ,KAAL,CAAWI,IAAX,CAAgBxB,cAH3B;AAIE,MAAA,QAAQ,EAAE,KAAKY,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9GF,eAoHE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBApHF,eAqHE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArHF,EAsHGsC,eAtHH,eAwHE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxHF,EAyHGC,aAzHH,eA2HE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3HF,eA4HE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5HF,eA0IE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,QAAQ,EAAE,KAAKvC,YAHjB;AAIE,MAAA,QAAQ,MAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1IF,eAgJE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhJF,eAiJE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjJF,eAkJE,oBAAC,YAAD;AACE,MAAA,YAAY,EAAE,KAAKgB,KAAL,CAAW6B,YAD3B;AAEE,MAAA,WAAW,EAAE,KAAKrC,KAAL,CAAWW,WAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlJF,CAFF,CADF;AA4JD;;AAhVwC","sourcesContent":["import React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\n// import Dropzone from \"react-dropzone\";\n\nconst imgURL = process.env.REACT_APP_IMG_URL;\n\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  description: \"\",\n  featuredProduct: '',\n  brand: \"\",\n  color: \"\",\n  price: \"\",\n  weight: \"\",\n  discountedItem: \"\",\n  discountType: \"\",\n  discountValue: \"\",\n  tags: \"\",\n  images: \"\",\n  manuDate: \"\",\n  expiryDate: \"\",\n  modelNo: \"\",\n  quantity: '',\n  inCart: ''\n};\n\nexport class ProductForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        ...defaultForm,\n      },\n      error: {\n        ...defaultForm,\n      },\n      isValidForm: false,\n      filesToUpload: [],\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.product) {\n      this.setState({\n        data: {\n          ...defaultForm,\n          ...this.props.product,\n          discountedItem: this.props.product.discount\n            ? this.props.product.discount.discountedItem || false\n            : \"\",\n          discountType: this.props.product.discount\n            ? this.props.product.discount.discountType\n            : \"\",\n          discountValue: this.props.product.discount\n            ? this.props.product.discount.discountValue\n            : \"\",\n          tags: this.props.product.tags\n            ? this.props.product.tags.join(\",\")\n            : \"\",\n        },\n      });\n    }\n    // console.log(this.state);\n    console.log(\"files to upload>>\", this.state.filesToUpload);\n\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(\"called when either state chage or props change\");\n  }\n\n  handleChange = (e) => {\n    let { type, name, value, checked, files } = e.target;\n    // console.log(\"target files\", e.target);\n    if (type === \"checkbox\") {\n      value = checked;\n    }\n\n    if (type === \"file\") {\n      const { filesToUpload } = this.state;\n      // filesToUpload.map(ftu => (\n      //   ftu.push(files),\n      //   this.setState({\n      //     ftu,\n      //   })\n      // ))\n\n        filesToUpload.push(...files);\n        return this.setState({\n          filesToUpload,\n        });\n\n      // return this.setState({\n      //   filesToUpload: [...this.state.filesToUpload, ...files]\n      //   })\n\n    }\n\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n  };\n\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        let errors = Object.values(this.state.error).filter((err) => err);\n        this.setState({\n          isValidForm: errors.length === 0,\n        });\n      }\n    );\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.submitCallback(this.state.data, this.state.filesToUpload);\n  };\n\n  render() {\n\n    // let btn = this.props.isSubmitting ? (\n    //   <button disabled className=\"btn btn-info\">\n    //     submitting...\n    //   </button>\n    // ) : (\n    //   <button\n    //     disabled={!this.state.isValidForm}\n    //     type=\"submit\"\n    //     className=\"btn btn-info\"\n    //   >\n    //     submit\n    //   </button>\n    // );\n\n    let discountContent = this.state.data.discountedItem ? (\n      <>\n        <label>Discount Type</label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Discount Type\"\n          name=\"discountType\"\n          value={this.state.data.discountType}\n          onChange={this.handleChange}\n        ></input>\n        <label>Discount Value</label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Discount Value\"\n          name=\"discountValue\"\n          value={this.state.data.discountValue}\n          onChange={this.handleChange}\n        ></input>\n      </>\n    ) : (\n      \"\"\n    );\n\n    let previousImage = this.state.data._id ? (\n      <>\n        {\" \"}\n        <label>Previous Image</label>\n        <br/>\n        \n\n        {this.state.data.images.map((image,i) => (\n          <div className=\"prev-images\" key={i}>\n          <img\n          src={`${imgURL}/${image}`}\n          alt=\"Previous emage\"\n          width=\"300px\"\n          height=\"300px\"\n        />\n        </div>\n\n        ))}\n        \n      </>\n    ) : (\n      \"\"\n    );\n\n    return (\n      <>\n        <h2>{this.props.title}</h2>\n        <form\n          className=\"form-group\"\n          onSubmit={this.handleSubmit}\n          encType=\"multipart/form-data\"\n        >\n          <label>Name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Name\"\n            name=\"name\"\n            value={this.state.data.name}\n            onChange={this.handleChange}\n          ></input>\n\n          <input\n            type=\"checkbox\"\n            name=\"featuredProduct\"\n            value={this.state.data.featuredProduct}\n            onChange={this.handleChange}\n          ></input>\n          <label>Featured Product</label>\n          <br/>\n          <label>Description</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Description\"\n            name=\"description\"\n            value={this.state.data.description}\n            onChange={this.handleChange}\n          ></input>\n          <label>Category</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Category\"\n            name=\"category\"\n            value={this.state.data.category}\n            onChange={this.handleChange}\n          ></input>\n          <p className=\"error\">{this.state.error.category}</p>\n          <label>Brand</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Brand\"\n            name=\"brand\"\n            value={this.state.data.brand}\n            onChange={this.handleChange}\n          ></input>\n          <label>Price</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Price\"\n            name=\"price\"\n            value={this.state.data.price}\n            onChange={this.handleChange}\n          ></input>\n          <label>Color</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Color\"\n            name=\"color\"\n            value={this.state.data.color}\n            onChange={this.handleChange}\n          ></input>\n          <label>Model No</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Model No\"\n            name=\"modelNo\"\n            value={this.state.data.modelNo}\n            onChange={this.handleChange}\n          ></input>\n          <label>Manu. Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"manuDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Expiry Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"expiryDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Tags</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Tags\"\n            name=\"tags\"\n            value={this.state.data.tags}\n            onChange={this.handleChange}\n          ></input>\n          <label>Weight</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Weight\"\n            name=\"weight\"\n            value={this.state.data.weight}\n            onChange={this.handleChange}\n          ></input>\n          <input\n            type=\"checkbox\"\n            name=\"discountedItem\"\n            checked={this.state.data.discountedItem}\n            onChange={this.handleChange}\n          ></input>\n          <label>Discounted Item</label>\n          <br></br>\n          {discountContent}\n\n          <br />\n          {previousImage}\n\n          <br />\n          <br />\n          {/* <Dropzone onDrop={(acceptedFiles) => console.log(acceptedFiles)}>\n            {({ getRootProps, getInputProps }) => (\n              <section className=\"drop-section\">\n                <div {...getRootProps({\n                    onChange: this.handleChange,\n                }\n                )}>\n                  <input {...getInputProps()} />\n                  <p>Drag 'n' drop some files here, or click to select files</p>\n                </div>\n              </section>\n            )}\n          </Dropzone> */}\n          <input\n            type=\"file\"\n            name=\"image\"\n            onChange={this.handleChange}\n            multiple\n          />\n          <br />\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}