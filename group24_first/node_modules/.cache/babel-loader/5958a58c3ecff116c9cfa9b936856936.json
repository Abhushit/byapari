{"ast":null,"code":"import _defineProperty from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";// import { Formik } from \"formik\";\nimport httpClient from\"../../util/httpClient\";import notify from\"../../util/notify\";import{Link}from\"react-router-dom\";import SubmitButton from\"../../common/submitButton/submitButton.component\";export var ResetPassword=/*#__PURE__*/function(_Component){_inherits(ResetPassword,_Component);var _super=_createSuper(ResetPassword);function ResetPassword(){var _this;_classCallCheck(this,ResetPassword);_this=_super.call(this);_this.handleChanges=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(function(preState){return{data:_objectSpread(_objectSpread({},preState.data),{},_defineProperty({},name,value))};},function(){// console.log(\"callback part of setstate >>\", this.state);\n//form validation\n_this.validateForm(name);});};_this.handleSubmit=function(e){e.preventDefault();_this.setState({isSubmitting:true});httpClient.POST(\"/auth/reset_password/\"+_this.userId,_this.state.data).then(function(data){notify.showSuccess(\"Password reset Successful, please login now\");_this.props.history.push(\"/\");}).catch(function(err){notify.handleError(err);_this.setState({isSubmitting:false});});};_this.state={data:{password:\"\",confirmPassword:\"\"},error:{password:\"\",confirmPassword:\"\"},isSubmitting:false,isValidForm:false};return _this;}_createClass(ResetPassword,[{key:\"componentDidMount\",value:function componentDidMount(){this.userId=this.props.match.params[\"id\"];}},{key:\"validateForm\",value:function validateForm(fieldName){var _this2=this;var errMsg;switch(fieldName){case\"password\":errMsg=this.state.data[fieldName]?this.state.data[fieldName].length>6?\"\":\"Password strength is low\":\"Required Field\";break;case\"confirmPassword\":errMsg=this.state.data[fieldName]?this.state.data[fieldName].length>6?\"\":\"Password strength is low\":\"Required Field\";break;default:break;}this.setState(function(preState){return{error:_objectSpread(_objectSpread({},preState.error),{},_defineProperty({},fieldName,errMsg))};},function(){//now disable submit button when form is invalid\nvar error=_this2.state.error;var err=Object.values(error).filter(function(item){return item;});// const matched =\n//   this.state.data.password === this.state.data.confirmPassword\n//     ? true\n//     : false;\n// console.log(\"state password is >>\", matched);\n_this2.setState({isValidForm:err.length===0//   isValidForm: matched\n});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"page-div container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Reset Password\"),/*#__PURE__*/React.createElement(\"p\",null,\"Please choose your password\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-group form-main\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",className:\"form-control\",onChange:this.handleChanges}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.password),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Confirm Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"confirm password\",className:\"form-control\",onChange:this.handleChanges}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.confirmPassword),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(SubmitButton,{isSubmitting:this.props.isSubmitting,isValidForm:this.state.isValidForm})),/*#__PURE__*/React.createElement(\"div\",{className:\"pull_right\"},\"Back to\",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\" Login\")));}}]);return ResetPassword;}(Component);","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/auth/resetPassword/resetPassword.component.js"],"names":["React","Component","httpClient","notify","Link","SubmitButton","ResetPassword","handleChanges","event","target","name","value","setState","preState","data","validateForm","handleSubmit","e","preventDefault","isSubmitting","POST","userId","state","then","showSuccess","props","history","push","catch","err","handleError","password","confirmPassword","error","isValidForm","match","params","fieldName","errMsg","length","Object","values","filter","item"],"mappings":"q6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA;AACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,kDAAzB,CAEA,UAAaC,CAAAA,aAAb,8GACE,wBAAc,+CACZ,wBADY,MAoBdC,aApBc,CAoBE,SAACC,KAAD,CAAW,mBACDA,KAAK,CAACC,MADL,CACjBC,IADiB,eACjBA,IADiB,CACXC,KADW,eACXA,KADW,CAEzB,MAAKC,QAAL,CACE,SAACC,QAAD,QAAe,CACbC,IAAI,gCACCD,QAAQ,CAACC,IADV,wBAEDJ,IAFC,CAEMC,KAFN,EADS,CAAf,EADF,CAOE,UAAM,CACJ;AACA;AACA,MAAKI,YAAL,CAAkBL,IAAlB,EACD,CAXH,EAaD,CAnCa,OAwFdM,YAxFc,CAwFC,SAACC,CAAD,CAAO,CACpBA,CAAC,CAACC,cAAF,GACA,MAAKN,QAAL,CAAc,CACZO,YAAY,CAAE,IADF,CAAd,EAGAjB,UAAU,CACPkB,IADH,CACQ,wBAAwB,MAAKC,MADrC,CAC6C,MAAKC,KAAL,CAAWR,IADxD,EAEGS,IAFH,CAEQ,SAACT,IAAD,CAAU,CACdX,MAAM,CAACqB,WAAP,CAAmB,6CAAnB,EACA,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CALH,EAMGC,KANH,CAMS,SAACC,GAAD,CAAS,CACd1B,MAAM,CAAC2B,WAAP,CAAmBD,GAAnB,EACA,MAAKjB,QAAL,CAAc,CACZO,YAAY,CAAE,KADF,CAAd,EAGD,CAXH,EAYD,CAzGa,CAEZ,MAAKG,KAAL,CAAa,CACXR,IAAI,CAAE,CACJiB,QAAQ,CAAE,EADN,CAEJC,eAAe,CAAE,EAFb,CADK,CAKXC,KAAK,CAAE,CACLF,QAAQ,CAAE,EADL,CAELC,eAAe,CAAE,EAFZ,CALI,CASXb,YAAY,CAAE,KATH,CAUXe,WAAW,CAAE,KAVF,CAAb,CAFY,aAcb,CAfH,uFAiBsB,CAClB,KAAKb,MAAL,CAAc,KAAKI,KAAL,CAAWU,KAAX,CAAiBC,MAAjB,CAAwB,IAAxB,CAAd,CACD,CAnBH,kDAsCeC,SAtCf,CAsC0B,iBACtB,GAAIC,CAAAA,MAAJ,CACA,OAAQD,SAAR,EACE,IAAK,UAAL,CACEC,MAAM,CAAG,KAAKhB,KAAL,CAAWR,IAAX,CAAgBuB,SAAhB,EACL,KAAKf,KAAL,CAAWR,IAAX,CAAgBuB,SAAhB,EAA2BE,MAA3B,CAAoC,CAApC,CACE,EADF,CAEE,0BAHG,CAIL,gBAJJ,CAKA,MACF,IAAK,iBAAL,CACED,MAAM,CAAG,KAAKhB,KAAL,CAAWR,IAAX,CAAgBuB,SAAhB,EACL,KAAKf,KAAL,CAAWR,IAAX,CAAgBuB,SAAhB,EAA2BE,MAA3B,CAAoC,CAApC,CACE,EADF,CAEE,0BAHG,CAIL,gBAJJ,CAKE,MAEJ,QACE,MAjBJ,CAmBA,KAAK3B,QAAL,CACE,SAACC,QAAD,QAAe,CACboB,KAAK,gCACApB,QAAQ,CAACoB,KADT,wBAEFI,SAFE,CAEUC,MAFV,EADQ,CAAf,EADF,CAOE,UAAM,CACJ;AADI,GAGIL,CAAAA,KAHJ,CAGc,MAAI,CAACX,KAHnB,CAGIW,KAHJ,CAIJ,GAAIJ,CAAAA,GAAG,CAAGW,MAAM,CAACC,MAAP,CAAcR,KAAd,EAAqBS,MAArB,CAA4B,SAACC,IAAD,QAAUA,CAAAA,IAAV,EAA5B,CAAV,CAEA;AACA;AACA;AACA;AAEA;AAGA,MAAI,CAAC/B,QAAL,CAAc,CACZsB,WAAW,CAAEL,GAAG,CAACU,MAAJ,GAAe,CAC9B;AAFc,CAAd,EAKD,CA1BH,EA4BD,CAvFH,uCA4GW,CACP,mBACE,2BAAK,SAAS,CAAC,oBAAf,eACE,+CADF,cAEE,2DAFF,cAGE,4BAAM,SAAS,CAAC,sBAAhB,CAAuC,QAAQ,CAAE,KAAKvB,YAAtD,eACE,8BADF,cAEE,4CAFF,cAGE,6BACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,UAHd,CAIE,SAAS,CAAC,cAJZ,CAKE,QAAQ,CAAE,KAAKT,aALjB,EAHF,cAUE,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKe,KAAL,CAAWW,KAAX,CAAiBF,QAAvC,CAVF,cAWE,8BAXF,cAYE,oDAZF,cAaE,6BACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,iBAFP,CAGE,WAAW,CAAC,kBAHd,CAIE,SAAS,CAAC,cAJZ,CAKE,QAAQ,CAAE,KAAKxB,aALjB,EAbF,cAoBE,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKe,KAAL,CAAWW,KAAX,CAAiBD,eAAvC,CApBF,cAqBE,8BArBF,cAsBE,oBAAC,YAAD,EACE,YAAY,CAAE,KAAKP,KAAL,CAAWN,YAD3B,CAEE,WAAW,CAAE,KAAKG,KAAL,CAAWY,WAF1B,EAtBF,CAHF,cA8BE,2BAAK,SAAS,CAAC,YAAf,yBACS,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,WADT,CA9BF,CADF,CAoCD,CAjJH,2BAAmCjC,SAAnC","sourcesContent":["import React, { Component } from \"react\";\n// import { Formik } from \"formik\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport { Link } from \"react-router-dom\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\n\nexport class ResetPassword extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        password: \"\",\n        confirmPassword: \"\",\n      },\n      error: {\n        password: \"\",\n        confirmPassword: \"\",\n      },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n\n  componentDidMount() {\n    this.userId = this.props.match.params[\"id\"];\n  }\n\n  handleChanges = (event) => {\n    const { name, value } = event.target;\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        // console.log(\"callback part of setstate >>\", this.state);\n        //form validation\n        this.validateForm(name);\n      }\n    );\n  };\n\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"password\":\n        errMsg = this.state.data[fieldName]\n          ? this.state.data[fieldName].length > 6\n            ? \"\"\n            : \"Password strength is low\"\n          : \"Required Field\";\n        break;\n      case \"confirmPassword\":\n        errMsg = this.state.data[fieldName]\n          ? this.state.data[fieldName].length > 6\n            ? \"\"\n            : \"Password strength is low\"\n          : \"Required Field\";\n          break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        //now disable submit button when form is invalid\n\n        const { error } = this.state;\n        let err = Object.values(error).filter((item) => item);\n\n        // const matched =\n        //   this.state.data.password === this.state.data.confirmPassword\n        //     ? true\n        //     : false;\n\n        // console.log(\"state password is >>\", matched);\n\n\n        this.setState({\n          isValidForm: err.length === 0,\n        //   isValidForm: matched\n          \n        });\n      }\n    );\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.setState({\n      isSubmitting: true,\n    });\n    httpClient\n      .POST(\"/auth/reset_password/\"+this.userId, this.state.data)\n      .then((data) => {\n        notify.showSuccess(\"Password reset Successful, please login now\");\n        this.props.history.push(\"/\");\n      })\n      .catch((err) => {\n        notify.handleError(err);\n        this.setState({\n          isSubmitting: false,\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"page-div container\">\n        <h2>Reset Password</h2>\n        <p>Please choose your password</p>\n        <form className=\"form-group form-main\" onSubmit={this.handleSubmit}>\n          <br />\n          <label>Password</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"password\"\n            className=\"form-control\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.password}</p>\n          <br />\n          <label>Confirm Password</label>\n          <input\n            type=\"password\"\n            name=\"confirmPassword\"\n            placeholder=\"confirm password\"\n            className=\"form-control\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.confirmPassword}</p>\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n        <div className=\"pull_right\">\n          Back to<Link to=\"/\"> Login</Link>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}