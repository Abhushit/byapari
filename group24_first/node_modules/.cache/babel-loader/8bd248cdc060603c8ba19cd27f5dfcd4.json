{"ast":null,"code":"import _defineProperty from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import Notify from\"./../../util/notify\";import HttpClient from\"./../../util/httpClient\";export var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.handleSubmit=function(e){e.preventDefault();//http call\nHttpClient.POST(\"/auth/login\",_this.state.data).then(function(response){console.log(\"response >>\",response);Notify.showSuccess(\"Welcome \".concat(response.data.user.username));localStorage.setItem(\"token\",response.data.token);localStorage.setItem(\"user\",JSON.stringify(response.data.user));_this.props.history.push(\"/dashboard\");}).catch(function(err){Notify.handleError(err);});// axios\n//   .post(\"http://localhost:9090/api/auth/login\", this.state.data)\n//\n// const { chapter } = this.state;\n// chapter += 1;\n// let chapter = this.state.chapter;\n// let newChapter = chapter + 1;\n// this.setState({\n//   chapter : newChapter\n// })\n// console.log(\"Check state>>\", this.state);\n//http with username and password\n};_this.state={data:{username:\"\",password:\"\"},error:{username:\"\",password:\"\"},remember_me:false,isSubmitting:false,isValidForm:false};_this.handleChanges=_this.handleChanges.bind(_assertThisInitialized(_this));//bind gareko\n// console.log(\"Constructor is first\");\nreturn _this;}// componentWillMount(){\n//   console.log('Before render component will mount');\n// }\n// componentDidMount() {\n//   // console.log('check props >>', this.props)\n//   // Notify.showSuccess('Login page loaded');\n//   //self invoked block\n//   // console.log('I am component did mount');\n//   // let { chapter } = this.state;\n//   // this.interval = setInterval(() => {\n//   //   chapter++;\n//   //   this.setState({\n//   //     chapter\n//   //   })\n//   // },1000)\n// }\n// componentDidUpdate(prevProps, prevState) {\n//   // console.log('prev state>>',prevState);\n//   // console.log('Once the component data is updated > props or state');\n// }\n// componentWillUnmount() {\n//   // console.log('once component is destroyed');\n//   // clearInterval(this.interval);\n//   //its purpose is to close all unfinished jobs\n// }\n_createClass(Login,[{key:\"handleChanges\",value:function handleChanges(event){var _this2=this;var _event$target=event.target,name=_event$target.name,value=_event$target.value;this.setState(function(preState){return{data:_objectSpread(_objectSpread({},preState.data),{},_defineProperty({},name,value))};},function(){_this2.validateForm(name);});//State change trigger\n}},{key:\"validateForm\",value:function validateForm(fieldName){var _this3=this;var errMsg=this.state.data[fieldName]?\"\":\"\".concat(fieldName,\" is required\");this.setState(function(preState){return{error:_objectSpread(_objectSpread({},preState.error),{},_defineProperty({},fieldName,errMsg))};},function(){//check form is valid\nvar errors=Object.values(_this3.state.error).filter(function(error){return error;});_this3.setState({isValidForm:errors.length===0});});}},{key:\"render\",value:function render(){// console.log(\"render at second\");\nvar btn=this.state.isSubmitting?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info mt-2\",disabled:true},\"Loginin...\"):/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",disabled:!this.state.isValidForm,className:\"btn btn-primary mt-2\",onClick:this.handleSubmit},\"Login\");return/*#__PURE__*/React.createElement(\"div\",{className:\"public_route page-div\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),/*#__PURE__*/React.createElement(\"p\",null,\"Please login to start your session\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-group form-main\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Username\",className:\"form-control\",id:\"username\",name:\"username\",onChange:this.handleChanges}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.username),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",className:\"form-control\",id:\"password\",name:\"password\",onChange:this.handleChanges}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.password),btn),/*#__PURE__*/React.createElement(\"p\",null,\"Don't have an account?\"),/*#__PURE__*/React.createElement(\"p\",null,\"Register \",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Here\"),/*#__PURE__*/React.createElement(\"span\",{className:\"pull_right\"},/*#__PURE__*/React.createElement(Link,{to:\"/forgot_password\"},\"forgot password?\"))));}}]);return Login;}(Component);","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/auth/login/login.component.js"],"names":["React","Component","Link","Notify","HttpClient","Login","handleSubmit","e","preventDefault","POST","state","data","then","response","console","log","showSuccess","user","username","localStorage","setItem","token","JSON","stringify","props","history","push","catch","err","handleError","password","error","remember_me","isSubmitting","isValidForm","handleChanges","bind","event","target","name","value","setState","preState","validateForm","fieldName","errMsg","errors","Object","values","filter","length","btn"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Notify from \"./../../util/notify\";\nimport HttpClient from \"./../../util/httpClient\";\n\nexport class Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        username: \"\",\n        password: \"\",\n      },\n      error: {\n        username: \"\",\n        password: \"\",\n      },\n      remember_me: false,\n      isSubmitting: false,\n      isValidForm: false,\n    };\n    this.handleChanges = this.handleChanges.bind(this); //bind gareko\n    // console.log(\"Constructor is first\");\n  }\n\n  // componentWillMount(){\n  //   console.log('Before render component will mount');\n  // }\n\n  // componentDidMount() {\n  //   // console.log('check props >>', this.props)\n  //   // Notify.showSuccess('Login page loaded');\n  //   //self invoked block\n  //   // console.log('I am component did mount');\n  //   // let { chapter } = this.state;\n  //   // this.interval = setInterval(() => {\n  //   //   chapter++;\n  //   //   this.setState({\n  //   //     chapter\n  //   //   })\n  //   // },1000)\n  // }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   // console.log('prev state>>',prevState);\n  //   // console.log('Once the component data is updated > props or state');\n  // }\n\n  // componentWillUnmount() {\n  //   // console.log('once component is destroyed');\n  //   // clearInterval(this.interval);\n  //   //its purpose is to close all unfinished jobs\n  // }\n\n  handleChanges(event) {\n    const { name, value } = event.target;\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n    //State change trigger\n  }\n\n  validateForm(fieldName) {\n    let errMsg = this.state.data[fieldName] ? \"\" : `${fieldName} is required`;\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        //check form is valid\n        let errors = Object.values(this.state.error).filter((error) => error);\n        this.setState({\n          isValidForm: errors.length === 0,\n        });\n      }\n    );\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    //http call\n    HttpClient.POST(\"/auth/login\", this.state.data)\n      .then((response) => {\n        console.log(\"response >>\", response);\n        Notify.showSuccess(`Welcome ${response.data.user.username}`);\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n        this.props.history.push(\"/dashboard\");\n      })\n      .catch((err) => {\n        Notify.handleError(err);\n      });\n\n    // axios\n    //   .post(\"http://localhost:9090/api/auth/login\", this.state.data)\n    //\n\n    // const { chapter } = this.state;\n    // chapter += 1;\n    // let chapter = this.state.chapter;\n    // let newChapter = chapter + 1;\n    // this.setState({\n    //   chapter : newChapter\n    // })\n    // console.log(\"Check state>>\", this.state);\n    //http with username and password\n  };\n\n  render() {\n    // console.log(\"render at second\");\n    let btn = this.state.isSubmitting ? (\n      <button className=\"btn btn-info mt-2\" disabled>\n        Loginin...\n      </button>\n    ) : (\n      <button\n        type=\"submit\"\n        disabled={!this.state.isValidForm}\n        className=\"btn btn-primary mt-2\"\n        onClick={this.handleSubmit}\n      >\n        Login\n      </button>\n    );\n    return (\n      <div className=\"public_route page-div\">\n        <h2>Login</h2>\n        <p>Please login to start your session</p>\n        <form className=\"form-group form-main\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            className=\"form-control\"\n            id=\"username\"\n            name=\"username\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.username}</p>\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"form-control\"\n            id=\"password\"\n            name=\"password\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.password}</p>\n          {btn}\n        </form>\n        {/* <p>Current Chapter : {this.state.chapter}</p> */}\n        <p>Don't have an account?</p>\n        <p>\n          Register <Link to=\"/register\">Here</Link>\n          <span className=\"pull_right\">\n            <Link to=\"/forgot_password\">forgot password?</Link>\n          </span>\n        </p>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}