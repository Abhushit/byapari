{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/react_1/group24_first/src/components/products/searchProduct/searchProduct.component.js\";\nimport React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  color: \"\",\n  minPrice: \"\",\n  maxPrice: \"\",\n  fromDate: \"\",\n  toDate: \"\",\n  discountedItem: \"\",\n  tags: \"\"\n};\nexport class SearchProduct extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      let {\n        type,\n        name,\n        value,\n        checked\n      } = e.target;\n\n      if (type === \"checkbox\") {\n        value = checked;\n      }\n\n      if (name === 'category') {\n        this.buildNameOptions(value);\n      }\n\n      this.setState(preState => ({\n        data: { ...preState.data,\n          [name]: value\n        }\n      }), () => {\n        this.validateForm(name);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); //search\n    };\n\n    this.state = {\n      allProducts: [],\n      categories: [],\n      data: { ...defaultForm\n      },\n      error: { ...defaultForm\n      },\n      isSubmitting: false,\n      isValidForm: false\n    };\n  }\n\n  componentDidMount() {\n    httpClient.POST(\"/product/search\", {}).then(response => {\n      let categories = [];\n      response.data.forEach(product => {\n        if (categories.indexOf(product.category) == -1) {\n          categories.push(product.category);\n        }\n      });\n      this.setState({\n        allProducts: response.data,\n        categories\n      });\n    }).catch(err => {\n      notify.handleError(err);\n    });\n  }\n\n  buildNameOptions(selectCategory) {\n    let names = this.state.allProducts.filter(product => product.category == selectedCategory);\n    this.setState({\n      names\n    });\n  }\n\n  validateForm(fieldName) {\n    let errMsg;\n\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(preState => ({\n      error: { ...preState.error,\n        [fieldName]: errMsg\n      }\n    }), () => {\n      let errors = Object.values(this.state.error).filter(err => err);\n      this.setState({\n        isValidForm: errors.length === 0\n      });\n    });\n  }\n\n  render() {\n    // let btn = this.props.isSubmitting ? (\n    //     <button disabled className=\"btn btn-info\">\n    //       submitting...\n    //     </button>\n    //   ) : (\n    //     <button\n    //       disabled={!this.state.isValidForm}\n    //       type=\"submit\"\n    //       className=\"btn btn-info\"\n    //     >\n    //       submit\n    //     </button>\n    //   );\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, \"Search Products Here\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-group\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"category\",\n      value: this.state.data.category,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"(Selected Category)\"), this.state.categories.map(item => /*#__PURE__*/React.createElement(\"option\", {\n      value: item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, item))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, this.state.error.category), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, \"Brand\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Brand\",\n      name: \"brand\",\n      value: this.state.data.brand,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, \"Min Price\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Min Price\",\n      name: \"minPrice\",\n      value: this.state.data.minPrice,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, \"Max Price\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Max Price\",\n      name: \"maxPrice\",\n      value: this.state.data.maxPrice,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, \"Color\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Color\",\n      name: \"color\",\n      value: this.state.data.color,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }, \"From Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"fromDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }, \"To Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"toDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, \"Tags\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Tags\",\n      name: \"tags\",\n      value: this.state.data.tags,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }, \"Weight\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Weight\",\n      name: \"weight\",\n      value: this.state.data.weight,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SubmitButton, {\n      isSubmitting: this.props.isSubmitting,\n      isValidForm: this.state.isValidForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/products/searchProduct/searchProduct.component.js"],"names":["React","Component","SubmitButton","httpClient","notify","defaultForm","name","category","brand","color","minPrice","maxPrice","fromDate","toDate","discountedItem","tags","SearchProduct","constructor","handleChange","e","type","value","checked","target","buildNameOptions","setState","preState","data","validateForm","handleSubmit","preventDefault","state","allProducts","categories","error","isSubmitting","isValidForm","componentDidMount","POST","then","response","forEach","product","indexOf","push","catch","err","handleError","selectCategory","names","filter","selectedCategory","fieldName","errMsg","errors","Object","values","length","render","map","item","weight","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\n\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  color: \"\",\n  minPrice: \"\",\n  maxPrice: \"\",\n  fromDate: \"\",\n  toDate: \"\",\n  discountedItem: \"\",\n  tags: \"\",\n};\n\nexport class SearchProduct extends Component {\n  constructor() {\n    super();\n    this.state = {\n      allProducts: [],\n      categories: [],\n      data: { ...defaultForm },\n      error: { ...defaultForm },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n\n  componentDidMount() {\n    httpClient\n      .POST(\"/product/search\", {})\n      .then((response) => {\n        let categories = [];\n        response.data.forEach(product => {\n          if(categories.indexOf(product.category) == -1){\n            categories.push(product.category);\n          }\n        });\n        this.setState({\n          allProducts: response.data,\n          categories\n        })\n      })\n      .catch((err) => {\n        notify.handleError(err);\n      });\n  }\n\n  buildNameOptions(selectCategory){\n    let names = this.state.allProducts.filter(product => product.category == selectedCategory);\n    this.setState({\n      names\n    })\n  }\n\n\n  handleChange = (e) => {\n    let { type, name, value, checked } = e.target;\n    if (type === \"checkbox\") {\n      value = checked;\n    }\n\n    if(name === 'category'){\n      this.buildNameOptions(value);\n    }\n\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n  };\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        let errors = Object.values(this.state.error).filter((err) => err);\n        this.setState({\n          isValidForm: errors.length === 0,\n        });\n      }\n    );\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    //search\n  };\n\n  render() {\n    // let btn = this.props.isSubmitting ? (\n    //     <button disabled className=\"btn btn-info\">\n    //       submitting...\n    //     </button>\n    //   ) : (\n    //     <button\n    //       disabled={!this.state.isValidForm}\n    //       type=\"submit\"\n    //       className=\"btn btn-info\"\n    //     >\n    //       submit\n    //     </button>\n    //   );\n\n    return (\n      <>\n      <div className=\"container\">\n        <h2>Search Products Here</h2>\n        <form className=\"form-group\" onSubmit={this.handleSubmit}>\n          \n\n          <label>Category</label>\n          <select\n            className=\"form-control\"\n            name=\"category\"\n            value={this.state.data.category}\n            onChange={this.handleChange}\n          >\n            <option value=\"\" selected>(Selected Category)</option>\n            {this.state.categories.map(item => (\n              <option value={item}>{item}</option>\n            ))}\n\n          </select>\n\n{/* <label>Name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Name\"\n            name=\"name\"\n            value={this.state.data.name}\n            onChange={this.handleChange}\n          ></input> */}\n\n          <p className=\"error\">{this.state.error.category}</p>\n          <label>Brand</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Brand\"\n            name=\"brand\"\n            value={this.state.data.brand}\n            onChange={this.handleChange}\n          ></input>\n          <label>Min Price</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Min Price\"\n            name=\"minPrice\"\n            value={this.state.data.minPrice}\n            onChange={this.handleChange}\n          ></input>\n          <label>Max Price</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Max Price\"\n            name=\"maxPrice\"\n            value={this.state.data.maxPrice}\n            onChange={this.handleChange}\n          ></input>\n\n          <label>Color</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Color\"\n            name=\"color\"\n            value={this.state.data.color}\n            onChange={this.handleChange}\n          ></input>\n\n          <label>From Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"fromDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>To Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"toDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Tags</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Tags\"\n            name=\"tags\"\n            value={this.state.data.tags}\n            onChange={this.handleChange}\n          ></input>\n          <label>Weight</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Weight\"\n            name=\"weight\"\n            value={this.state.data.weight}\n            onChange={this.handleChange}\n          ></input>\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n      </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}