{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/react_1/group24_first/src/components/products/searchProduct/searchProduct.component.js\";\nimport React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport ViewProduct from \"./../viewProduct/viewProduct.component\";\nimport { SingleProduct } from \"../singleProduct/singleProduct.component\";\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  color: \"\",\n  minPrice: \"\",\n  maxPrice: \"\",\n  fromDate: \"\",\n  toDate: \"\",\n  discountedItem: \"\",\n  multipleDateRange: \"\",\n  tags: \"\"\n};\nexport class SearchProduct extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      let {\n        type,\n        name,\n        value,\n        checked\n      } = e.target;\n\n      if (type === \"checkbox\") {\n        value = checked;\n      }\n\n      if (name === \"category\") {\n        this.buildNameOptions(value);\n      }\n\n      this.setState(preState => ({\n        data: { ...preState.data,\n          [name]: value\n        }\n      }), () => {\n        this.validateForm(name);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); //search\n\n      const {\n        data\n      } = this.state;\n\n      if (!data.multipleDateRange) {\n        data.toDate = data.fromDate;\n      }\n\n      httpClient.GET(\"/product/search\", false, data).then(response => {\n        console.log(\"search result is response\", response);\n\n        if (!response.data.length) {\n          return notify.showInfo(\"No any product matched your search query\");\n        }\n\n        this.setState({\n          searchResult: response.data\n        });\n      }).catch(err => {\n        notify.handleError(err);\n      });\n    };\n\n    this.reset = () => {\n      this.setState({\n        searchResult: []\n      });\n    };\n\n    this.state = {\n      allProducts: [],\n      categories: [],\n      names: [],\n      searchResult: [],\n      data: { ...defaultForm\n      },\n      error: { ...defaultForm\n      },\n      isSubmitting: false,\n      isValidForm: false\n    };\n  }\n\n  componentDidMount() {\n    httpClient.POST(\"/product/search\", {}).then(response => {\n      let categories = []; //unique categories\n\n      response.data.forEach(product => {\n        if (categories.indexOf(product.category) === -1) {\n          categories.push(product.category);\n        }\n      });\n      this.setState({\n        allProducts: response.data,\n        categories\n      });\n    }).catch(err => {\n      notify.handleError(err);\n    });\n  }\n\n  buildNameOptions(selectedCategory) {\n    let names = this.state.allProducts.filter(product => product.category === selectedCategory);\n    this.setState({\n      names\n    });\n  }\n\n  validateForm(fieldName) {\n    let errMsg;\n\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(preState => ({\n      error: { ...preState.error,\n        [fieldName]: errMsg\n      }\n    }), () => {\n      let errors = Object.values(this.state.error).filter(err => err);\n      this.setState({\n        isValidForm: errors.length === 0\n      });\n    });\n  }\n\n  render() {\n    console.log('props history', this.props);\n    console.log('incoming data>>', this.state);\n    let mainContent = this.state.searchResult.length ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SingleProduct, {\n      incomingData: this.state.searchResult,\n      resetSearch: this.reset,\n      history: this.props.history,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      style: marginTop = \"80px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, \"Search Products Here\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-group\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"category\",\n      value: this.state.data.category,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"(Selected Category)\"), this.state.categories.map((item, i) => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, item))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, this.state.error.category), this.state.names.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"name\",\n      value: this.state.data.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, \"(Select Name)\"), this.state.names.map((name, i) => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: name.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, name.name)))), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }, \"Brand\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Brand\",\n      name: \"brand\",\n      value: this.state.data.brand,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }\n    }, \"Min Price\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Min Price\",\n      name: \"minPrice\",\n      value: this.state.data.minPrice,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, \"Max Price\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Max Price\",\n      name: \"maxPrice\",\n      value: this.state.data.maxPrice,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, \"Color\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Color\",\n      name: \"color\",\n      value: this.state.data.color,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }\n    }, \"Select Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"fromDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      onChange: this.handleChange,\n      name: \"multipleDateRange\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }\n    }, \"Multiple Date Range\"), this.state.data.multipleDateRange && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }, \"To Date\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      className: \"form-control\",\n      name: \"toDate\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, \"Tags\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Tags\",\n      name: \"tags\",\n      value: this.state.data.tags,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }\n    }, \"Weight\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Weight\",\n      name: \"weight\",\n      value: this.state.data.weight,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(SubmitButton, {\n      isSubmitting: this.props.isSubmitting,\n      isValidForm: this.state.isValidForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 13\n      }\n    }))));\n    return mainContent;\n  }\n\n}","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/products/searchProduct/searchProduct.component.js"],"names":["React","Component","SubmitButton","httpClient","notify","ViewProduct","SingleProduct","defaultForm","name","category","brand","color","minPrice","maxPrice","fromDate","toDate","discountedItem","multipleDateRange","tags","SearchProduct","constructor","handleChange","e","type","value","checked","target","buildNameOptions","setState","preState","data","validateForm","handleSubmit","preventDefault","state","GET","then","response","console","log","length","showInfo","searchResult","catch","err","handleError","reset","allProducts","categories","names","error","isSubmitting","isValidForm","componentDidMount","POST","forEach","product","indexOf","push","selectedCategory","filter","fieldName","errMsg","errors","Object","values","render","props","mainContent","history","marginTop","map","item","i","weight"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,kDAAzB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,WAAP,MAAwB,wCAAxB;AACA,SAASC,aAAT,QAA8B,0CAA9B;AAEA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE,EADY;AAElBC,EAAAA,QAAQ,EAAE,EAFQ;AAGlBC,EAAAA,KAAK,EAAE,EAHW;AAIlBC,EAAAA,KAAK,EAAE,EAJW;AAKlBC,EAAAA,QAAQ,EAAE,EALQ;AAMlBC,EAAAA,QAAQ,EAAE,EANQ;AAOlBC,EAAAA,QAAQ,EAAE,EAPQ;AAQlBC,EAAAA,MAAM,EAAE,EARU;AASlBC,EAAAA,cAAc,EAAE,EATE;AAUlBC,EAAAA,iBAAiB,EAAE,EAVD;AAWlBC,EAAAA,IAAI,EAAE;AAXY,CAApB;AAcA,OAAO,MAAMC,aAAN,SAA4BlB,SAA5B,CAAsC;AAC3CmB,EAAAA,WAAW,GAAG;AACZ;;AADY,SA6CdC,YA7Cc,GA6CEC,CAAD,IAAO;AACpB,UAAI;AAAEC,QAAAA,IAAF;AAAQf,QAAAA,IAAR;AAAcgB,QAAAA,KAAd;AAAqBC,QAAAA;AAArB,UAAiCH,CAAC,CAACI,MAAvC;;AACA,UAAIH,IAAI,KAAK,UAAb,EAAyB;AACvBC,QAAAA,KAAK,GAAGC,OAAR;AACD;;AAED,UAAIjB,IAAI,KAAK,UAAb,EAAyB;AACvB,aAAKmB,gBAAL,CAAsBH,KAAtB;AACD;;AAED,WAAKI,QAAL,CACGC,QAAD,KAAe;AACbC,QAAAA,IAAI,EAAE,EACJ,GAAGD,QAAQ,CAACC,IADR;AAEJ,WAACtB,IAAD,GAAQgB;AAFJ;AADO,OAAf,CADF,EAOE,MAAM;AACJ,aAAKO,YAAL,CAAkBvB,IAAlB;AACD,OATH;AAWD,KAlEa;;AAAA,SA8FdwB,YA9Fc,GA8FEV,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACW,cAAF,GADoB,CAEpB;;AACA,YAAM;AAAEH,QAAAA;AAAF,UAAW,KAAKI,KAAtB;;AACA,UAAI,CAACJ,IAAI,CAACb,iBAAV,EAA6B;AAC3Ba,QAAAA,IAAI,CAACf,MAAL,GAAce,IAAI,CAAChB,QAAnB;AACD;;AACDX,MAAAA,UAAU,CACPgC,GADH,CACO,iBADP,EAC0B,KAD1B,EACiCL,IADjC,EAEGM,IAFH,CAESC,QAAD,IAAc;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,QAAzC;;AACA,YAAI,CAACA,QAAQ,CAACP,IAAT,CAAcU,MAAnB,EAA2B;AACzB,iBAAOpC,MAAM,CAACqC,QAAP,CAAgB,0CAAhB,CAAP;AACD;;AACD,aAAKb,QAAL,CAAc;AACZc,UAAAA,YAAY,EAAEL,QAAQ,CAACP;AADX,SAAd;AAGD,OAVH,EAWGa,KAXH,CAWUC,GAAD,IAAS;AACdxC,QAAAA,MAAM,CAACyC,WAAP,CAAmBD,GAAnB;AACD,OAbH;AAcD,KAnHa;;AAAA,SAqHdE,KArHc,GAqHN,MAAM;AACZ,WAAKlB,QAAL,CAAc;AACZc,QAAAA,YAAY,EAAE;AADF,OAAd;AAGD,KAzHa;;AAEZ,SAAKR,KAAL,GAAa;AACXa,MAAAA,WAAW,EAAE,EADF;AAEXC,MAAAA,UAAU,EAAE,EAFD;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXP,MAAAA,YAAY,EAAE,EAJH;AAKXZ,MAAAA,IAAI,EAAE,EAAE,GAAGvB;AAAL,OALK;AAMX2C,MAAAA,KAAK,EAAE,EAAE,GAAG3C;AAAL,OANI;AAOX4C,MAAAA,YAAY,EAAE,KAPH;AAQXC,MAAAA,WAAW,EAAE;AARF,KAAb;AAUD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBlD,IAAAA,UAAU,CACPmD,IADH,CACQ,iBADR,EAC2B,EAD3B,EAEGlB,IAFH,CAESC,QAAD,IAAc;AAClB,UAAIW,UAAU,GAAG,EAAjB,CADkB,CAGlB;;AACAX,MAAAA,QAAQ,CAACP,IAAT,CAAcyB,OAAd,CAAuBC,OAAD,IAAa;AACjC,YAAIR,UAAU,CAACS,OAAX,CAAmBD,OAAO,CAAC/C,QAA3B,MAAyC,CAAC,CAA9C,EAAiD;AAC/CuC,UAAAA,UAAU,CAACU,IAAX,CAAgBF,OAAO,CAAC/C,QAAxB;AACD;AACF,OAJD;AAKA,WAAKmB,QAAL,CAAc;AACZmB,QAAAA,WAAW,EAAEV,QAAQ,CAACP,IADV;AAEZkB,QAAAA;AAFY,OAAd;AAID,KAfH,EAgBGL,KAhBH,CAgBUC,GAAD,IAAS;AACdxC,MAAAA,MAAM,CAACyC,WAAP,CAAmBD,GAAnB;AACD,KAlBH;AAmBD;;AAEDjB,EAAAA,gBAAgB,CAACgC,gBAAD,EAAmB;AACjC,QAAIV,KAAK,GAAG,KAAKf,KAAL,CAAWa,WAAX,CAAuBa,MAAvB,CACTJ,OAAD,IAAaA,OAAO,CAAC/C,QAAR,KAAqBkD,gBADxB,CAAZ;AAGA,SAAK/B,QAAL,CAAc;AACZqB,MAAAA;AADY,KAAd;AAGD;;AAwBDlB,EAAAA,YAAY,CAAC8B,SAAD,EAAY;AACtB,QAAIC,MAAJ;;AACA,YAAQD,SAAR;AACE,WAAK,UAAL;AACEC,QAAAA,MAAM,GAAG,KAAK5B,KAAL,CAAWJ,IAAX,CAAgB+B,SAAhB,IAA6B,EAA7B,GAAkC,iBAA3C;AACA;;AAEF;AACE;AANJ;;AAQA,SAAKjC,QAAL,CACGC,QAAD,KAAe;AACbqB,MAAAA,KAAK,EAAE,EACL,GAAGrB,QAAQ,CAACqB,KADP;AAEL,SAACW,SAAD,GAAaC;AAFR;AADM,KAAf,CADF,EAOE,MAAM;AACJ,UAAIC,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAK/B,KAAL,CAAWgB,KAAzB,EAAgCU,MAAhC,CAAwChB,GAAD,IAASA,GAAhD,CAAb;AACA,WAAKhB,QAAL,CAAc;AACZwB,QAAAA,WAAW,EAAEW,MAAM,CAACvB,MAAP,KAAkB;AADnB,OAAd;AAGD,KAZH;AAcD;;AAgCD0B,EAAAA,MAAM,GAAG;AAEP5B,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B,KAAK4B,KAAlC;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+B,KAAKL,KAApC;AAEA,QAAIkC,WAAW,GAAG,KAAKlC,KAAL,CAAWQ,YAAX,CAAwBF,MAAxB,gBAChB,uDAME,oBAAC,aAAD;AACE,MAAA,YAAY,EAAE,KAAKN,KAAL,CAAWQ,YAD3B;AAEE,MAAA,WAAW,EAAE,KAAKI,KAFpB;AAGE,MAAA,OAAO,EAAE,KAAKqB,KAAL,CAAWE,OAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADgB,gBAchB,uDACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,KAAK,EAAEC,SAAS,GAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAA6B,MAAA,QAAQ,EAAE,KAAKtC,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,KAAK,EAAE,KAAKE,KAAL,CAAWJ,IAAX,CAAgBrB,QAHzB;AAIE,MAAA,QAAQ,EAAE,KAAKY,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AAAQ,MAAA,KAAK,EAAC,EAAd;AAAiB,MAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BANF,EASG,KAAKa,KAAL,CAAWc,UAAX,CAAsBuB,GAAtB,CAA0B,CAACC,IAAD,EAAOC,CAAP,kBACzB;AAAQ,MAAA,GAAG,EAAEA,CAAb;AAAgB,MAAA,KAAK,EAAED,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,IADH,CADD,CATH,CAFF,eAiBE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKtC,KAAL,CAAWgB,KAAX,CAAiBzC,QAAvC,CAjBF,EAmBG,KAAKyB,KAAL,CAAWe,KAAX,CAAiBT,MAAjB,iBACC,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWJ,IAAX,CAAgBtB,IAHzB;AAIE,MAAA,QAAQ,EAAE,KAAKa,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,KAAK,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBANF,EASG,KAAKa,KAAL,CAAWe,KAAX,CAAiBsB,GAAjB,CAAqB,CAAC/D,IAAD,EAAOiE,CAAP,kBACpB;AAAQ,MAAA,GAAG,EAAEA,CAAb;AAAgB,MAAA,KAAK,EAAEjE,IAAI,CAACA,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,IAAI,CAACA,IADR,CADD,CATH,CAFF,CApBJ,eAwCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAxCF,eAyCE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,KAAK,EAAE,KAAK0B,KAAL,CAAWJ,IAAX,CAAgBpB,KALzB;AAME,MAAA,QAAQ,EAAE,KAAKW,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzCF,eAiDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAjDF,eAkDE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,WAHd;AAIE,MAAA,IAAI,EAAC,UAJP;AAKE,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWJ,IAAX,CAAgBlB,QALzB;AAME,MAAA,QAAQ,EAAE,KAAKS,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlDF,eA0DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBA1DF,eA2DE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,WAHd;AAIE,MAAA,IAAI,EAAC,UAJP;AAKE,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWJ,IAAX,CAAgBjB,QALzB;AAME,MAAA,QAAQ,EAAE,KAAKQ,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3DF,eAoEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eApEF,eAqEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWJ,IAAX,CAAgBnB,KALzB;AAME,MAAA,QAAQ,EAAE,KAAKU,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArEF,eA8EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBA9EF,eA+EE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,QAAQ,EAAE,KAAKA,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/EF,eAsFE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,QAAQ,EAAE,KAAKA,YAFjB;AAGE,MAAA,IAAI,EAAC,mBAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtFF,eA2FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BA3FF,EA4FG,KAAKa,KAAL,CAAWJ,IAAX,CAAgBb,iBAAhB,iBACC,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,QAAQ,EAAE,KAAKI,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA7FJ,eAuGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvGF,eAwGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAxGF,eAyGE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,MAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWJ,IAAX,CAAgBZ,IALzB;AAME,MAAA,QAAQ,EAAE,KAAKG,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzGF,eAiHE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjHF,eAkHE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,WAAW,EAAC,QAHd;AAIE,MAAA,IAAI,EAAC,QAJP;AAKE,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWJ,IAAX,CAAgB4C,MALzB;AAME,MAAA,QAAQ,EAAE,KAAKrD,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlHF,eA0HE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1HF,eA2HE,oBAAC,YAAD;AACE,MAAA,YAAY,EAAE,KAAK8C,KAAL,CAAWhB,YAD3B;AAEE,MAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWkB,WAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3HF,CAFF,CADF,CAdF;AAqJA,WAAOgB,WAAP;AACD;;AAvR0C","sourcesContent":["import React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport ViewProduct from \"./../viewProduct/viewProduct.component\";\nimport { SingleProduct } from \"../singleProduct/singleProduct.component\";\n\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  color: \"\",\n  minPrice: \"\",\n  maxPrice: \"\",\n  fromDate: \"\",\n  toDate: \"\",\n  discountedItem: \"\",\n  multipleDateRange: \"\",\n  tags: \"\",\n};\n\nexport class SearchProduct extends Component {\n  constructor() {\n    super();\n    this.state = {\n      allProducts: [],\n      categories: [],\n      names: [],\n      searchResult: [],\n      data: { ...defaultForm },\n      error: { ...defaultForm },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n\n  componentDidMount() {\n    httpClient\n      .POST(\"/product/search\", {})\n      .then((response) => {\n        let categories = [];\n\n        //unique categories\n        response.data.forEach((product) => {\n          if (categories.indexOf(product.category) === -1) {\n            categories.push(product.category);\n          }\n        });\n        this.setState({\n          allProducts: response.data,\n          categories,\n        });\n      })\n      .catch((err) => {\n        notify.handleError(err);\n      });\n  }\n\n  buildNameOptions(selectedCategory) {\n    let names = this.state.allProducts.filter(\n      (product) => product.category === selectedCategory\n    );\n    this.setState({\n      names,\n    });\n  }\n\n  handleChange = (e) => {\n    let { type, name, value, checked } = e.target;\n    if (type === \"checkbox\") {\n      value = checked;\n    }\n\n    if (name === \"category\") {\n      this.buildNameOptions(value);\n    }\n\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n  };\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        let errors = Object.values(this.state.error).filter((err) => err);\n        this.setState({\n          isValidForm: errors.length === 0,\n        });\n      }\n    );\n  }\n\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    //search\n    const { data } = this.state;\n    if (!data.multipleDateRange) {\n      data.toDate = data.fromDate;\n    }\n    httpClient\n      .GET(\"/product/search\", false, data)\n      .then((response) => {\n        console.log(\"search result is response\", response);\n        if (!response.data.length) {\n          return notify.showInfo(\"No any product matched your search query\");\n        }\n        this.setState({\n          searchResult: response.data,\n        });\n      })\n      .catch((err) => {\n        notify.handleError(err);\n      });\n  };\n\n  reset = () => {\n    this.setState({\n      searchResult: [],\n    });\n  };\n\n  render() {\n\n    console.log('props history', this.props);\n    console.log('incoming data>>', this.state);\n\n    let mainContent = this.state.searchResult.length ? (\n      <>\n        {/* <ViewProduct\n          incomingData={this.state.searchResult}\n          resetSearch={this.reset}\n          history={this.props.history}\n        /> */}\n        <SingleProduct \n          incomingData={this.state.searchResult}\n          resetSearch={this.reset}\n          history={this.props.history}\n        />\n      </>\n    ) : (\n      <>\n        <div className=\"container\" style={marginTop=\"80px\"}>\n          <h2>Search Products Here</h2>\n          <form className=\"form-group\" onSubmit={this.handleSubmit}>\n            <label>Category</label>\n            <select\n              className=\"form-control\"\n              name=\"category\"\n              value={this.state.data.category}\n              onChange={this.handleChange}\n            >\n              <option value=\"\" selected>\n                (Selected Category)\n              </option>\n              {this.state.categories.map((item, i) => (\n                <option key={i} value={item}>\n                  {item}\n                </option>\n              ))}\n            </select>\n            <p className=\"error\">{this.state.error.category}</p>\n\n            {this.state.names.length && (\n              <>\n                <label>Name</label>\n                <select\n                  className=\"form-control\"\n                  name=\"name\"\n                  value={this.state.data.name}\n                  onChange={this.handleChange}\n                >\n                  <option selected value=\"\">\n                    (Select Name)\n                  </option>\n                  {this.state.names.map((name, i) => (\n                    <option key={i} value={name.name}>\n                      {name.name}\n                    </option>\n                  ))}\n                </select>\n              </>\n            )}\n\n            <label>Brand</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Brand\"\n              name=\"brand\"\n              value={this.state.data.brand}\n              onChange={this.handleChange}\n            ></input>\n            <label>Min Price</label>\n            <input\n              type=\"number\"\n              className=\"form-control\"\n              placeholder=\"Min Price\"\n              name=\"minPrice\"\n              value={this.state.data.minPrice}\n              onChange={this.handleChange}\n            ></input>\n            <label>Max Price</label>\n            <input\n              type=\"number\"\n              className=\"form-control\"\n              placeholder=\"Max Price\"\n              name=\"maxPrice\"\n              value={this.state.data.maxPrice}\n              onChange={this.handleChange}\n            ></input>\n\n            <label>Color</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Color\"\n              name=\"color\"\n              value={this.state.data.color}\n              onChange={this.handleChange}\n            ></input>\n\n            <label>Select Date</label>\n            <input\n              type=\"date\"\n              className=\"form-control\"\n              name=\"fromDate\"\n              onChange={this.handleChange}\n            ></input>\n\n            <input\n              type=\"checkbox\"\n              onChange={this.handleChange}\n              name=\"multipleDateRange\"\n            />\n            <label>Multiple Date Range</label>\n            {this.state.data.multipleDateRange && (\n              <>\n                <label>To Date</label>\n                <input\n                  type=\"date\"\n                  className=\"form-control\"\n                  name=\"toDate\"\n                  onChange={this.handleChange}\n                ></input>\n              </>\n            )}\n            <br />\n            <label>Tags</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Tags\"\n              name=\"tags\"\n              value={this.state.data.tags}\n              onChange={this.handleChange}\n            ></input>\n            <label>Weight</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Weight\"\n              name=\"weight\"\n              value={this.state.data.weight}\n              onChange={this.handleChange}\n            ></input>\n            <br />\n            <SubmitButton\n              isSubmitting={this.props.isSubmitting}\n              isValidForm={this.state.isValidForm}\n            />\n          </form>\n        </div>\n      </>\n    );\n\n    return mainContent;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}