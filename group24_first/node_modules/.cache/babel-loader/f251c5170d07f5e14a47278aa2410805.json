{"ast":null,"code":"import _defineProperty from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/lampp/htdocs/react_1/group24_first/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import SubmitButton from\"../../common/submitButton/submitButton.component\";// import Dropzone from \"react-dropzone\";\nvar imgURL=process.env.REACT_APP_IMG_URL;var defaultForm={name:\"\",category:\"\",description:\"\",featuredProduct:'',brand:\"\",color:\"\",price:\"\",weight:\"\",discountedItem:\"\",discountType:\"\",discountValue:\"\",tags:\"\",images:\"\",manuDate:\"\",expiryDate:\"\",modelNo:\"\",quantity:'',inCart:[]};export var ProductForm=/*#__PURE__*/function(_Component){_inherits(ProductForm,_Component);var _super=_createSuper(ProductForm);function ProductForm(){var _this;_classCallCheck(this,ProductForm);_this=_super.call(this);_this.handleChange=function(e){var _e$target=e.target,type=_e$target.type,name=_e$target.name,value=_e$target.value,checked=_e$target.checked,files=_e$target.files;// console.log(\"target files\", e.target);\nif(type===\"checkbox\"){value=checked;}if(type===\"file\"){var filesToUpload=_this.state.filesToUpload;// filesToUpload.map(ftu => (\n//   ftu.push(files),\n//   this.setState({\n//     ftu,\n//   })\n// ))\nfilesToUpload.push.apply(filesToUpload,_toConsumableArray(files));return _this.setState({filesToUpload:filesToUpload});// return this.setState({\n//   filesToUpload: [...this.state.filesToUpload, ...files]\n//   })\n}_this.setState(function(preState){return{data:_objectSpread(_objectSpread({},preState.data),{},_defineProperty({},name,value))};},function(){_this.validateForm(name);});};_this.handleSubmit=function(e){e.preventDefault();_this.props.submitCallback(_this.state.data,_this.state.filesToUpload);};_this.state={data:_objectSpread({},defaultForm),error:_objectSpread({},defaultForm),isValidForm:false,filesToUpload:[]};return _this;}_createClass(ProductForm,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.product){this.setState({data:_objectSpread(_objectSpread(_objectSpread({},defaultForm),this.props.product),{},{discountedItem:this.props.product.discount?this.props.product.discount.discountedItem||false:\"\",discountType:this.props.product.discount?this.props.product.discount.discountType:\"\",discountValue:this.props.product.discount?this.props.product.discount.discountValue:\"\",tags:this.props.product.tags?this.props.product.tags.join(\",\"):\"\"})});}// console.log(this.state);\nconsole.log(\"files to upload>>\",this.state.filesToUpload);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){// console.log(\"called when either state chage or props change\");\n}},{key:\"validateForm\",value:function validateForm(fieldName){var _this2=this;var errMsg;switch(fieldName){case\"category\":errMsg=this.state.data[fieldName]?\"\":\"Required Field*\";break;default:break;}this.setState(function(preState){return{error:_objectSpread(_objectSpread({},preState.error),{},_defineProperty({},fieldName,errMsg))};},function(){var errors=Object.values(_this2.state.error).filter(function(err){return err;});_this2.setState({isValidForm:errors.length===0});});}},{key:\"render\",value:function render(){// let btn = this.props.isSubmitting ? (\n//   <button disabled className=\"btn btn-info\">\n//     submitting...\n//   </button>\n// ) : (\n//   <button\n//     disabled={!this.state.isValidForm}\n//     type=\"submit\"\n//     className=\"btn btn-info\"\n//   >\n//     submit\n//   </button>\n// );\nvar discountContent=this.state.data.discountedItem?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"label\",null,\"Discount Type\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Discount Type\",name:\"discountType\",value:this.state.data.discountType,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Discount Value\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Discount Value\",name:\"discountValue\",value:this.state.data.discountValue,onChange:this.handleChange})):\"\";var previousImage=this.state.data._id?/*#__PURE__*/React.createElement(React.Fragment,null,\" \",/*#__PURE__*/React.createElement(\"label\",null,\"Previous Image\"),/*#__PURE__*/React.createElement(\"br\",null),this.state.data.images.map(function(image,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"prev-images\",key:i},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(imgURL,\"/\").concat(image),alt:\"Previous emage\",width:\"300px\",height:\"300px\"}));})):\"\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h2\",null,this.props.title),/*#__PURE__*/React.createElement(\"form\",{className:\"form-group\",onSubmit:this.handleSubmit,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"label\",null,\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Name\",name:\"name\",value:this.state.data.name,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"featuredProduct\",value:this.state.data.featuredProduct,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Featured Product\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Description\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Description\",name:\"description\",value:this.state.data.description,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Category\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Category\",name:\"category\",value:this.state.data.category,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.error.category),/*#__PURE__*/React.createElement(\"label\",null,\"Brand\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Brand\",name:\"brand\",value:this.state.data.brand,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Price\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Price\",name:\"price\",value:this.state.data.price,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Color\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Color\",name:\"color\",value:this.state.data.color,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Model No\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Model No\",name:\"modelNo\",value:this.state.data.modelNo,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Manu. Date\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",className:\"form-control\",name:\"manuDate\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Expiry Date\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",className:\"form-control\",name:\"expiryDate\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Tags\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Tags\",name:\"tags\",value:this.state.data.tags,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Weight\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Weight\",name:\"weight\",value:this.state.data.weight,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"discountedItem\",checked:this.state.data.discountedItem,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",null,\"Discounted Item\"),/*#__PURE__*/React.createElement(\"br\",null),discountContent,/*#__PURE__*/React.createElement(\"br\",null),previousImage,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"image\",onChange:this.handleChange,multiple:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(SubmitButton,{isSubmitting:this.props.isSubmitting,isValidForm:this.state.isValidForm})));}}]);return ProductForm;}(Component);","map":{"version":3,"sources":["/opt/lampp/htdocs/react_1/group24_first/src/components/products/productForm/productForm.component.js"],"names":["React","Component","SubmitButton","imgURL","process","env","REACT_APP_IMG_URL","defaultForm","name","category","description","featuredProduct","brand","color","price","weight","discountedItem","discountType","discountValue","tags","images","manuDate","expiryDate","modelNo","quantity","inCart","ProductForm","handleChange","e","target","type","value","checked","files","filesToUpload","state","push","setState","preState","data","validateForm","handleSubmit","preventDefault","props","submitCallback","error","isValidForm","product","discount","join","console","log","prevProps","prevState","fieldName","errMsg","errors","Object","values","filter","err","length","discountContent","previousImage","_id","map","image","i","title","isSubmitting"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\n// import Dropzone from \"react-dropzone\";\n\nconst imgURL = process.env.REACT_APP_IMG_URL;\n\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  description: \"\",\n  featuredProduct: '',\n  brand: \"\",\n  color: \"\",\n  price: \"\",\n  weight: \"\",\n  discountedItem: \"\",\n  discountType: \"\",\n  discountValue: \"\",\n  tags: \"\",\n  images: \"\",\n  manuDate: \"\",\n  expiryDate: \"\",\n  modelNo: \"\",\n  quantity: '',\n  inCart: []\n};\n\nexport class ProductForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        ...defaultForm,\n      },\n      error: {\n        ...defaultForm,\n      },\n      isValidForm: false,\n      filesToUpload: [],\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.product) {\n      this.setState({\n        data: {\n          ...defaultForm,\n          ...this.props.product,\n          discountedItem: this.props.product.discount\n            ? this.props.product.discount.discountedItem || false\n            : \"\",\n          discountType: this.props.product.discount\n            ? this.props.product.discount.discountType\n            : \"\",\n          discountValue: this.props.product.discount\n            ? this.props.product.discount.discountValue\n            : \"\",\n          tags: this.props.product.tags\n            ? this.props.product.tags.join(\",\")\n            : \"\",\n        },\n      });\n    }\n    // console.log(this.state);\n    console.log(\"files to upload>>\", this.state.filesToUpload);\n\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(\"called when either state chage or props change\");\n  }\n\n  handleChange = (e) => {\n    let { type, name, value, checked, files } = e.target;\n    // console.log(\"target files\", e.target);\n    if (type === \"checkbox\") {\n      value = checked;\n    }\n\n    if (type === \"file\") {\n      const { filesToUpload } = this.state;\n      // filesToUpload.map(ftu => (\n      //   ftu.push(files),\n      //   this.setState({\n      //     ftu,\n      //   })\n      // ))\n\n        filesToUpload.push(...files);\n        return this.setState({\n          filesToUpload,\n        });\n\n      // return this.setState({\n      //   filesToUpload: [...this.state.filesToUpload, ...files]\n      //   })\n\n    }\n\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n  };\n\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"Required Field*\";\n        break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        let errors = Object.values(this.state.error).filter((err) => err);\n        this.setState({\n          isValidForm: errors.length === 0,\n        });\n      }\n    );\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.submitCallback(this.state.data, this.state.filesToUpload);\n  };\n\n  render() {\n\n    // let btn = this.props.isSubmitting ? (\n    //   <button disabled className=\"btn btn-info\">\n    //     submitting...\n    //   </button>\n    // ) : (\n    //   <button\n    //     disabled={!this.state.isValidForm}\n    //     type=\"submit\"\n    //     className=\"btn btn-info\"\n    //   >\n    //     submit\n    //   </button>\n    // );\n\n    let discountContent = this.state.data.discountedItem ? (\n      <>\n        <label>Discount Type</label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Discount Type\"\n          name=\"discountType\"\n          value={this.state.data.discountType}\n          onChange={this.handleChange}\n        ></input>\n        <label>Discount Value</label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Discount Value\"\n          name=\"discountValue\"\n          value={this.state.data.discountValue}\n          onChange={this.handleChange}\n        ></input>\n      </>\n    ) : (\n      \"\"\n    );\n\n    let previousImage = this.state.data._id ? (\n      <>\n        {\" \"}\n        <label>Previous Image</label>\n        <br/>\n        \n\n        {this.state.data.images.map((image,i) => (\n          <div className=\"prev-images\" key={i}>\n          <img\n          src={`${imgURL}/${image}`}\n          alt=\"Previous emage\"\n          width=\"300px\"\n          height=\"300px\"\n        />\n        </div>\n\n        ))}\n        \n      </>\n    ) : (\n      \"\"\n    );\n\n    return (\n      <>\n        <h2>{this.props.title}</h2>\n        <form\n          className=\"form-group\"\n          onSubmit={this.handleSubmit}\n          encType=\"multipart/form-data\"\n        >\n          <label>Name</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Name\"\n            name=\"name\"\n            value={this.state.data.name}\n            onChange={this.handleChange}\n          ></input>\n\n          <input\n            type=\"checkbox\"\n            name=\"featuredProduct\"\n            value={this.state.data.featuredProduct}\n            onChange={this.handleChange}\n          ></input>\n          <label>Featured Product</label>\n          <br/>\n          <label>Description</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Description\"\n            name=\"description\"\n            value={this.state.data.description}\n            onChange={this.handleChange}\n          ></input>\n          <label>Category</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Category\"\n            name=\"category\"\n            value={this.state.data.category}\n            onChange={this.handleChange}\n          ></input>\n          <p className=\"error\">{this.state.error.category}</p>\n          <label>Brand</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Brand\"\n            name=\"brand\"\n            value={this.state.data.brand}\n            onChange={this.handleChange}\n          ></input>\n          <label>Price</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Price\"\n            name=\"price\"\n            value={this.state.data.price}\n            onChange={this.handleChange}\n          ></input>\n          <label>Color</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Color\"\n            name=\"color\"\n            value={this.state.data.color}\n            onChange={this.handleChange}\n          ></input>\n          <label>Model No</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Model No\"\n            name=\"modelNo\"\n            value={this.state.data.modelNo}\n            onChange={this.handleChange}\n          ></input>\n          <label>Manu. Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"manuDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Expiry Date</label>\n          <input\n            type=\"date\"\n            className=\"form-control\"\n            name=\"expiryDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Tags</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Tags\"\n            name=\"tags\"\n            value={this.state.data.tags}\n            onChange={this.handleChange}\n          ></input>\n          <label>Weight</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Weight\"\n            name=\"weight\"\n            value={this.state.data.weight}\n            onChange={this.handleChange}\n          ></input>\n          <input\n            type=\"checkbox\"\n            name=\"discountedItem\"\n            checked={this.state.data.discountedItem}\n            onChange={this.handleChange}\n          ></input>\n          <label>Discounted Item</label>\n          <br></br>\n          {discountContent}\n\n          <br />\n          {previousImage}\n\n          <br />\n          <br />\n          {/* <Dropzone onDrop={(acceptedFiles) => console.log(acceptedFiles)}>\n            {({ getRootProps, getInputProps }) => (\n              <section className=\"drop-section\">\n                <div {...getRootProps({\n                    onChange: this.handleChange,\n                }\n                )}>\n                  <input {...getInputProps()} />\n                  <p>Drag 'n' drop some files here, or click to select files</p>\n                </div>\n              </section>\n            )}\n          </Dropzone> */}\n          <input\n            type=\"file\"\n            name=\"image\"\n            onChange={this.handleChange}\n            multiple\n          />\n          <br />\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}