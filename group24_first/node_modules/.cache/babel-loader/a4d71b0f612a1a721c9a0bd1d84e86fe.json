{"ast":null,"code":"var _jsxFileName = \"/media/abhushit/New Volume/git projects/react_1/group24_first/src/components/auth/resetPassword/resetPassword.component.js\";\nimport React, { Component } from \"react\"; // import { Formik } from \"formik\";\n\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport { Link } from \"react-router-dom\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\nexport class ResetPassword extends Component {\n  constructor() {\n    super();\n\n    this.handleChanges = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState(preState => ({\n        data: { ...preState.data,\n          [name]: value\n        }\n      }), () => {\n        // console.log(\"callback part of setstate >>\", this.state);\n        //form validation\n        this.validateForm(name);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        isSubmitting: true\n      });\n      httpClient.POST(\"/auth/reset_password/\" + this.userId, this.state.data).then(data => {\n        notify.showSuccess(\"Password reset Successful, please login now\");\n        this.props.history.push(\"/\");\n      }).catch(err => {\n        notify.handleError(err);\n        this.setState({\n          isSubmitting: false\n        });\n      });\n    };\n\n    this.state = {\n      data: {\n        password: \"\",\n        confirmPassword: \"\"\n      },\n      error: {\n        password: \"\",\n        confirmPassword: \"\"\n      },\n      isSubmitting: false,\n      isValidForm: false\n    };\n  }\n\n  componentDidMount() {\n    this.userId = this.props.match.params[\"id\"];\n  }\n\n  validateForm(fieldName) {\n    let errMsg;\n\n    switch (fieldName) {\n      case \"password\":\n        errMsg = this.state.data[fieldName] ? this.state.data[fieldName].length > 6 ? \"\" : \"Password strength is low\" : \"Required Field\";\n        break;\n\n      case \"confirmPassword\":\n        errMsg = this.state.data[fieldName] ? this.state.data[fieldName].length > 6 ? \"\" : \"Password strength is low\" : \"Required Field\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(preState => ({\n      error: { ...preState.error,\n        [fieldName]: errMsg\n      }\n    }), () => {\n      //now disable submit button when form is invalid\n      const {\n        error\n      } = this.state;\n      let err = Object.values(error).filter(item => item); // const matched =\n      //   this.state.data.password === this.state.data.confirmPassword\n      //     ? true\n      //     : false;\n      // console.log(\"state password is >>\", matched);\n\n      this.setState({\n        isValidForm: err.length === 0 //   isValidForm: matched\n\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"public_route\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, \"Reset Password\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, \"Please choose your password\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-group\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"password\",\n      className: \"form-control\",\n      onChange: this.handleChanges,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, this.state.error.password), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"confirmPassword\",\n      placeholder: \"confirm password\",\n      className: \"form-control\",\n      onChange: this.handleChanges,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, this.state.error.confirmPassword), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SubmitButton, {\n      isSubmitting: this.props.isSubmitting,\n      isValidForm: this.state.isValidForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pull_right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, \"Back to\", /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 18\n      }\n    }, \" Login\")));\n  }\n\n}","map":{"version":3,"sources":["/media/abhushit/New Volume/git projects/react_1/group24_first/src/components/auth/resetPassword/resetPassword.component.js"],"names":["React","Component","httpClient","notify","Link","SubmitButton","ResetPassword","constructor","handleChanges","event","name","value","target","setState","preState","data","validateForm","handleSubmit","e","preventDefault","isSubmitting","POST","userId","state","then","showSuccess","props","history","push","catch","err","handleError","password","confirmPassword","error","isValidForm","componentDidMount","match","params","fieldName","errMsg","length","Object","values","filter","item","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,YAAP,MAAyB,kDAAzB;AAEA,OAAO,MAAMC,aAAN,SAA4BL,SAA5B,CAAsC;AAC3CM,EAAAA,WAAW,GAAG;AACZ;;AADY,SAoBdC,aApBc,GAoBGC,KAAD,IAAW;AACzB,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBF,KAAK,CAACG,MAA9B;AACA,WAAKC,QAAL,CACGC,QAAD,KAAe;AACbC,QAAAA,IAAI,EAAE,EACJ,GAAGD,QAAQ,CAACC,IADR;AAEJ,WAACL,IAAD,GAAQC;AAFJ;AADO,OAAf,CADF,EAOE,MAAM;AACJ;AACA;AACA,aAAKK,YAAL,CAAkBN,IAAlB;AACD,OAXH;AAaD,KAnCa;;AAAA,SAwFdO,YAxFc,GAwFEC,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKN,QAAL,CAAc;AACZO,QAAAA,YAAY,EAAE;AADF,OAAd;AAGAlB,MAAAA,UAAU,CACPmB,IADH,CACQ,0BAAwB,KAAKC,MADrC,EAC6C,KAAKC,KAAL,CAAWR,IADxD,EAEGS,IAFH,CAEST,IAAD,IAAU;AACdZ,QAAAA,MAAM,CAACsB,WAAP,CAAmB,6CAAnB;AACA,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OALH,EAMGC,KANH,CAMUC,GAAD,IAAS;AACd3B,QAAAA,MAAM,CAAC4B,WAAP,CAAmBD,GAAnB;AACA,aAAKjB,QAAL,CAAc;AACZO,UAAAA,YAAY,EAAE;AADF,SAAd;AAGD,OAXH;AAYD,KAzGa;;AAEZ,SAAKG,KAAL,GAAa;AACXR,MAAAA,IAAI,EAAE;AACJiB,QAAAA,QAAQ,EAAE,EADN;AAEJC,QAAAA,eAAe,EAAE;AAFb,OADK;AAKXC,MAAAA,KAAK,EAAE;AACLF,QAAAA,QAAQ,EAAE,EADL;AAELC,QAAAA,eAAe,EAAE;AAFZ,OALI;AASXb,MAAAA,YAAY,EAAE,KATH;AAUXe,MAAAA,WAAW,EAAE;AAVF,KAAb;AAYD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKd,MAAL,GAAc,KAAKI,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwB,IAAxB,CAAd;AACD;;AAmBDtB,EAAAA,YAAY,CAACuB,SAAD,EAAY;AACtB,QAAIC,MAAJ;;AACA,YAAQD,SAAR;AACE,WAAK,UAAL;AACEC,QAAAA,MAAM,GAAG,KAAKjB,KAAL,CAAWR,IAAX,CAAgBwB,SAAhB,IACL,KAAKhB,KAAL,CAAWR,IAAX,CAAgBwB,SAAhB,EAA2BE,MAA3B,GAAoC,CAApC,GACE,EADF,GAEE,0BAHG,GAIL,gBAJJ;AAKA;;AACF,WAAK,iBAAL;AACED,QAAAA,MAAM,GAAG,KAAKjB,KAAL,CAAWR,IAAX,CAAgBwB,SAAhB,IACL,KAAKhB,KAAL,CAAWR,IAAX,CAAgBwB,SAAhB,EAA2BE,MAA3B,GAAoC,CAApC,GACE,EADF,GAEE,0BAHG,GAIL,gBAJJ;AAKE;;AAEJ;AACE;AAjBJ;;AAmBA,SAAK5B,QAAL,CACGC,QAAD,KAAe;AACboB,MAAAA,KAAK,EAAE,EACL,GAAGpB,QAAQ,CAACoB,KADP;AAEL,SAACK,SAAD,GAAaC;AAFR;AADM,KAAf,CADF,EAOE,MAAM;AACJ;AAEA,YAAM;AAAEN,QAAAA;AAAF,UAAY,KAAKX,KAAvB;AACA,UAAIO,GAAG,GAAGY,MAAM,CAACC,MAAP,CAAcT,KAAd,EAAqBU,MAArB,CAA6BC,IAAD,IAAUA,IAAtC,CAAV,CAJI,CAMJ;AACA;AACA;AACA;AAEA;;AAGA,WAAKhC,QAAL,CAAc;AACZsB,QAAAA,WAAW,EAAEL,GAAG,CAACW,MAAJ,KAAe,CADhB,CAEd;;AAFc,OAAd;AAKD,KA1BH;AA4BD;;AAqBDK,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAFF,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAA6B,MAAA,QAAQ,EAAE,KAAK7B,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,SAAS,EAAC,cAJZ;AAKE,MAAA,QAAQ,EAAE,KAAKT,aALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,eAUE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKe,KAAL,CAAWW,KAAX,CAAiBF,QAAvC,CAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAZF,eAaE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,iBAFP;AAGE,MAAA,WAAW,EAAC,kBAHd;AAIE,MAAA,SAAS,EAAC,cAJZ;AAKE,MAAA,QAAQ,EAAE,KAAKxB,aALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,eAoBE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKe,KAAL,CAAWW,KAAX,CAAiBD,eAAvC,CApBF,eAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBF,eAsBE,oBAAC,YAAD;AACE,MAAA,YAAY,EAAE,KAAKP,KAAL,CAAWN,YAD3B;AAEE,MAAA,WAAW,EAAE,KAAKG,KAAL,CAAWY,WAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBF,CAHF,eA8BE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACS,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADT,CA9BF,CADF;AAoCD;;AAjJ0C","sourcesContent":["import React, { Component } from \"react\";\n// import { Formik } from \"formik\";\nimport httpClient from \"../../util/httpClient\";\nimport notify from \"../../util/notify\";\nimport { Link } from \"react-router-dom\";\nimport SubmitButton from \"../../common/submitButton/submitButton.component\";\n\nexport class ResetPassword extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        password: \"\",\n        confirmPassword: \"\",\n      },\n      error: {\n        password: \"\",\n        confirmPassword: \"\",\n      },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n\n  componentDidMount() {\n    this.userId = this.props.match.params[\"id\"];\n  }\n\n  handleChanges = (event) => {\n    const { name, value } = event.target;\n    this.setState(\n      (preState) => ({\n        data: {\n          ...preState.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        // console.log(\"callback part of setstate >>\", this.state);\n        //form validation\n        this.validateForm(name);\n      }\n    );\n  };\n\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"password\":\n        errMsg = this.state.data[fieldName]\n          ? this.state.data[fieldName].length > 6\n            ? \"\"\n            : \"Password strength is low\"\n          : \"Required Field\";\n        break;\n      case \"confirmPassword\":\n        errMsg = this.state.data[fieldName]\n          ? this.state.data[fieldName].length > 6\n            ? \"\"\n            : \"Password strength is low\"\n          : \"Required Field\";\n          break;\n\n      default:\n        break;\n    }\n    this.setState(\n      (preState) => ({\n        error: {\n          ...preState.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        //now disable submit button when form is invalid\n\n        const { error } = this.state;\n        let err = Object.values(error).filter((item) => item);\n\n        // const matched =\n        //   this.state.data.password === this.state.data.confirmPassword\n        //     ? true\n        //     : false;\n\n        // console.log(\"state password is >>\", matched);\n\n\n        this.setState({\n          isValidForm: err.length === 0,\n        //   isValidForm: matched\n          \n        });\n      }\n    );\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.setState({\n      isSubmitting: true,\n    });\n    httpClient\n      .POST(\"/auth/reset_password/\"+this.userId, this.state.data)\n      .then((data) => {\n        notify.showSuccess(\"Password reset Successful, please login now\");\n        this.props.history.push(\"/\");\n      })\n      .catch((err) => {\n        notify.handleError(err);\n        this.setState({\n          isSubmitting: false,\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"public_route\">\n        <h2>Reset Password</h2>\n        <p>Please choose your password</p>\n        <form className=\"form-group\" onSubmit={this.handleSubmit}>\n          <br />\n          <label>Password</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"password\"\n            className=\"form-control\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.password}</p>\n          <br />\n          <label>Confirm Password</label>\n          <input\n            type=\"password\"\n            name=\"confirmPassword\"\n            placeholder=\"confirm password\"\n            className=\"form-control\"\n            onChange={this.handleChanges}\n          />\n          <p className=\"error\">{this.state.error.confirmPassword}</p>\n          <br />\n          <SubmitButton\n            isSubmitting={this.props.isSubmitting}\n            isValidForm={this.state.isValidForm}\n          />\n        </form>\n        <div className=\"pull_right\">\n          Back to<Link to=\"/\"> Login</Link>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}